{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Navbar() {\r\n  const path = usePathname();\r\n\r\n  const tab = (href: string, label: string) => (\r\n    <Link\r\n      href={href}\r\n      className={`gaia-btn pill ${path === href ? \"primary\" : \"ghost\"}`}\r\n\r\n    >\r\n      {label}\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"brand\">\r\n        <div className=\"logo\" />\r\n        <div>\r\n          <h1>GAIA Link — Demo</h1>\r\n          <div className=\"muted\">Simulation Hub · SymbioSphere · Nexus</div>\r\n        </div>\r\n      </div>\r\n      <nav>\r\n        {tab(\"/gaia-link\", \"GAIA Link\")}\r\n        {tab(\"/symbiosphere\", \"SymbioSphere\")}\r\n        {tab(\"/nexus\", \"Nexus\")}\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,OAAO,IAAA,oJAAW;IAExB,MAAM,MAAM,CAAC,MAAc,sBACzB,6LAAC,0KAAI;YACH,MAAM;YACN,WAAW,CAAC,cAAc,EAAE,SAAS,OAAO,YAAY,SAAS;sBAGhE;;;;;;IAIL,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;;0CACC,6LAAC;0CAAG;;;;;;0CACJ,6LAAC;gCAAI,WAAU;0CAAQ;;;;;;;;;;;;;;;;;;0BAG3B,6LAAC;;oBACE,IAAI,cAAc;oBAClB,IAAI,iBAAiB;oBACrB,IAAI,UAAU;;;;;;;;;;;;;AAIvB;GA7BwB;;QACT,oJAAW;;;KADF","debugId":null}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Chatbot.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function Chatbot() {\r\n  const [open, setOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  async function send(msg: string) {\r\n    const res = await fetch(\"/api/chat\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        messages: [\r\n          { role: \"system\", content: \"You are GAIA.\" },\r\n          { role: \"user\", content: msg }\r\n        ]\r\n      }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    return data.reply;\r\n  }\r\n\r\n  async function handleSend() {\r\n    const input = document.getElementById(\"gaia-input\") as HTMLInputElement;\r\n    const text = input.value.trim();\r\n    if (!text) return;\r\n\r\n    input.value = \"\";\r\n\r\n    const reply = await send(text);\r\n\r\n    setMessages((m) => [...m, { user: text, gaia: reply }]);\r\n  }\r\n\r\n  function resetChat() {\r\n    setMessages([]);\r\n  }\r\n\r\n  async function resetMemory() {\r\n    await fetch(\"/api/resetMemory\");\r\n    alert(\"GAIA memory cleared.\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button className=\"gaia-btn icon chat-toggle\" onClick={() => setOpen(!open)}>\r\n        {open ? \"✖\" : \"GAIA\"}\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"chat-popup glass\">\r\n          <div className=\"chat-header\">\r\n            <strong>GAIA Assistant</strong>\r\n          </div>\r\n\r\n          <div className=\"chat-window\">\r\n            {messages.map((m, i) => (\r\n              <div key={i} className=\"chat-block\">\r\n                <div className=\"you\">You: {m.user}</div>\r\n                <div className=\"gaia\">GAIA: {m.gaia}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"chat-controls\">\r\n            <input id=\"gaia-input\" placeholder=\"Ask GAIA...\" />\r\n            <button className=\"gaia-btn primary\" onClick={handleSend}>Send</button>\r\n          </div>\r\n\r\n          <div className=\"chat-actions\">\r\n            <button className=\"gaia-btn pill\" onClick={resetChat}>Clear Chat</button>\r\n            <button className=\"gaia-btn danger\" onClick={resetMemory}>\r\n              Reset Memory\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAE3C,eAAe,KAAK,GAAW;QAC7B,MAAM,MAAM,MAAM,MAAM,aAAa;YACnC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU;oBACR;wBAAE,MAAM;wBAAU,SAAS;oBAAgB;oBAC3C;wBAAE,MAAM;wBAAQ,SAAS;oBAAI;iBAC9B;YACH;QACF;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,KAAK,KAAK;IACnB;IAEA,eAAe;QACb,MAAM,QAAQ,SAAS,cAAc,CAAC;QACtC,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI;QAC7B,IAAI,CAAC,MAAM;QAEX,MAAM,KAAK,GAAG;QAEd,MAAM,QAAQ,MAAM,KAAK;QAEzB,YAAY,CAAC,IAAM;mBAAI;gBAAG;oBAAE,MAAM;oBAAM,MAAM;gBAAM;aAAE;IACxD;IAEA,SAAS;QACP,YAAY,EAAE;IAChB;IAEA,eAAe;QACb,MAAM,MAAM;QACZ,MAAM;IACR;IAEA,qBACE;;0BACE,6LAAC;gBAAO,WAAU;gBAA4B,SAAS,IAAM,QAAQ,CAAC;0BACnE,OAAO,MAAM;;;;;;YAGf,sBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;sCAAO;;;;;;;;;;;kCAGV,6LAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,6LAAC;gCAAY,WAAU;;kDACrB,6LAAC;wCAAI,WAAU;;4CAAM;4CAAM,EAAE,IAAI;;;;;;;kDACjC,6LAAC;wCAAI,WAAU;;4CAAO;4CAAO,EAAE,IAAI;;;;;;;;+BAF3B;;;;;;;;;;kCAOd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,IAAG;gCAAa,aAAY;;;;;;0CACnC,6LAAC;gCAAO,WAAU;gCAAmB,SAAS;0CAAY;;;;;;;;;;;;kCAG5D,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAO,WAAU;gCAAgB,SAAS;0CAAW;;;;;;0CACtD,6LAAC;gCAAO,WAAU;gCAAkB,SAAS;0CAAa;;;;;;;;;;;;;;;;;;;;AAQtE;GA7EwB;KAAA","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaState.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function useGaiaState() {\r\n  const [state, setState] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function refresh() {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/state\", { cache: \"no-store\" });\r\n      const json = await res.json();\r\n      setState(json.state);\r\n    } catch (e) {\r\n      console.error(\"GAIA state load error\", e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return { state, loading, refresh };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAIe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAM;IACxC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,cAAc;gBAAE,OAAO;YAAW;YAC1D,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS,KAAK,KAAK;QACrB,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QAAE;QAAO;QAAS;IAAQ;AACnC;GAlBwB","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/EarthPreview.tsx"],"sourcesContent":["// components/EarthPreview.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport useGaiaState from '@/lib/useGaiaState';\r\n\r\nexport default function EarthPreview({ size = 120 }: { size?: number }) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d')!;\r\n    const w = canvas.width;\r\n    const h = canvas.height;\r\n    const centerX = w / 2;\r\n    const centerY = h / 2;\r\n    const radius = Math.min(w, h) / 2 - 5;\r\n\r\n    // Get tint from state or use default blue\r\n    const tint = !loading && state?.earth_tint ? state.earth_tint : '#1c8cf9';\r\n\r\n    // Draw background\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Draw Earth sphere with gradient\r\n    const gradient = ctx.createRadialGradient(centerX - 10, centerY - 10, 0, centerX, centerY, radius);\r\n    gradient.addColorStop(0, tint);\r\n    gradient.addColorStop(0.7, tint + 'dd');\r\n    gradient.addColorStop(1, '#021822');\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Draw Earth outline\r\n    ctx.strokeStyle = 'rgba(255,255,255,0.1)';\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n\r\n    // Add some landmass texture\r\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\r\n    for (let i = 0; i < 5; i++) {\r\n      const angle = (i / 5) * Math.PI * 2;\r\n      const x = centerX + Math.cos(angle) * radius * 0.6;\r\n      const y = centerY + Math.sin(angle) * radius * 0.6;\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius * 0.25, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n\r\n    // Draw risk indicator if available\r\n    if (!loading && state?.risk_val != null) {\r\n      const riskRadius = radius * (1 + state.risk_val * 0.3);\r\n      ctx.strokeStyle = state.risk_val > 0.6 ? 'rgba(255, 100, 100, 0.4)' : 'rgba(100, 200, 100, 0.4)';\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, riskRadius, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n    }\r\n  }, [state, loading]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 8 }}>\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={size}\r\n        height={size}\r\n        style={{\r\n          borderRadius: '50%',\r\n          boxShadow: '0 0 20px rgba(58, 209, 255, 0.2)',\r\n          display: 'block'\r\n        }}\r\n      />\r\n      <button \r\n        className=\"gaia-btn ghost\" \r\n        onClick={() => refresh()} \r\n        disabled={loading}\r\n        style={{ fontSize: '11px', padding: '4px 10px' }}\r\n      >\r\n        {loading ? 'Syncing...' : 'Refresh'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAE9B;AACA;;;AAFA;;;AAIe,SAAS,aAAa,EAAE,OAAO,GAAG,EAAqB;;IACpE,MAAM,YAAY,IAAA,uKAAM,EAAoB;IAC5C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,iIAAY;IAEhD,IAAA,0KAAS;kCAAC;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,CAAC,QAAQ;YAEb,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,MAAM,IAAI,OAAO,KAAK;YACtB,MAAM,IAAI,OAAO,MAAM;YACvB,MAAM,UAAU,IAAI;YACpB,MAAM,UAAU,IAAI;YACpB,MAAM,SAAS,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI;YAEpC,0CAA0C;YAC1C,MAAM,OAAO,CAAC,WAAW,OAAO,aAAa,MAAM,UAAU,GAAG;YAEhE,kBAAkB;YAClB,IAAI,SAAS,CAAC,GAAG,GAAG,GAAG;YAEvB,kCAAkC;YAClC,MAAM,WAAW,IAAI,oBAAoB,CAAC,UAAU,IAAI,UAAU,IAAI,GAAG,SAAS,SAAS;YAC3F,SAAS,YAAY,CAAC,GAAG;YACzB,SAAS,YAAY,CAAC,KAAK,OAAO;YAClC,SAAS,YAAY,CAAC,GAAG;YAEzB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,KAAK,EAAE,GAAG;YAC/C,IAAI,IAAI;YAER,qBAAqB;YACrB,IAAI,WAAW,GAAG;YAClB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,KAAK,EAAE,GAAG;YAC/C,IAAI,MAAM;YAEV,4BAA4B;YAC5B,IAAI,SAAS,GAAG;YAChB,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;gBAC1B,MAAM,QAAQ,AAAC,IAAI,IAAK,KAAK,EAAE,GAAG;gBAClC,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS,SAAS;gBAC/C,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS,SAAS;gBAC/C,IAAI,SAAS;gBACb,IAAI,GAAG,CAAC,GAAG,GAAG,SAAS,MAAM,GAAG,KAAK,EAAE,GAAG;gBAC1C,IAAI,IAAI;YACV;YAEA,mCAAmC;YACnC,IAAI,CAAC,WAAW,OAAO,YAAY,MAAM;gBACvC,MAAM,aAAa,SAAS,CAAC,IAAI,MAAM,QAAQ,GAAG,GAAG;gBACrD,IAAI,WAAW,GAAG,MAAM,QAAQ,GAAG,MAAM,6BAA6B;gBACtE,IAAI,SAAS,GAAG;gBAChB,IAAI,SAAS;gBACb,IAAI,GAAG,CAAC,SAAS,SAAS,YAAY,GAAG,KAAK,EAAE,GAAG;gBACnD,IAAI,MAAM;YACZ;QACF;iCAAG;QAAC;QAAO;KAAQ;IAEnB,qBACE,6LAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,eAAe;YAAU,YAAY;YAAU,KAAK;QAAE;;0BACnF,6LAAC;gBACC,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,OAAO;oBACL,cAAc;oBACd,WAAW;oBACX,SAAS;gBACX;;;;;;0BAEF,6LAAC;gBACC,WAAU;gBACV,SAAS,IAAM;gBACf,UAAU;gBACV,OAAO;oBAAE,UAAU;oBAAQ,SAAS;gBAAW;0BAE9C,UAAU,eAAe;;;;;;;;;;;;AAIlC;GAnFwB;;QAEc,iIAAY;;;KAF1B","debugId":null}},
    {"offset": {"line": 467, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Nexus.tsx"],"sourcesContent":["// components/Nexus.tsx\r\n'use client';\r\nimport useGaiaState from '@/lib/useGaiaState';\r\nimport EarthPreview from './EarthPreview';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function Nexus({ result }: { result?: any }){\r\n  const { state, loading, refresh } = useGaiaState();\r\n  const [symbioSummary, setSymbioSummary] = useState<string>('');\r\n  const [symbioDetails, setSymbioDetails] = useState<string>('');\r\n\r\n  // Load symbiosphere observations summary\r\n  useEffect(() => {\r\n    const obs = JSON.parse(localStorage.getItem('gaia_obs') || '[]');\r\n    if (obs.length > 0) {\r\n      const criticalCount = obs.filter((o: any) => o.level === 'critical').length;\r\n      const concernCount = obs.filter((o: any) => o.level === 'concern').length;\r\n      const goodCount = obs.filter((o: any) => o.level === 'excellent' || o.level === 'good').length;\r\n      const categories = [...new Set(obs.map((o: any) => o.type))];\r\n      \r\n      // Build detailed observation list\r\n      const observationDetails = obs.slice().reverse().map((o: any) => {\r\n        return `${o.type} in ${o.loc} (${o.level}): ${o.note}`;\r\n      }).join(' | ');\r\n      \r\n      const summary = `${obs.length} observations: ${goodCount} positive, ${concernCount} concerns, ${criticalCount} critical. Categories: ${categories.join(', ')}.`;\r\n      setSymbioSummary(summary);\r\n      setSymbioDetails(observationDetails);\r\n    }\r\n  }, []);\r\n\r\n  const gaiaChaos = !loading && state?.nexus?.chaos != null ? state.nexus.chaos : undefined;\r\n  const gaiaHue = !loading && state?.nexus?.hue != null ? state.nexus.hue : undefined;\r\n  const gaiaRisk = !loading && state?.risk != null ? state.risk : undefined;\r\n  const gaiaTint = !loading && state?.earth_tint ? state.earth_tint : undefined;\r\n  \r\n  const canvasRef = useRef<HTMLCanvasElement|null>(null);\r\n  const [tick, setTick] = useState(0);\r\n  \r\n  // Compute threat vs recovery - use GAIA state data if available\r\n  const gaidLinkedIndex = state?.gaia_link?.biodiversity ?? (result?.index ?? 50);\r\n  const idx = state && !loading ? gaidLinkedIndex : (result?.index ?? 50);\r\n  const threat = Math.max(0, 100 - idx);\r\n  const recovery = idx;\r\n\r\n  useEffect(()=>{\r\n    let raf = 0;\r\n    function draw(){\r\n      const canvas = canvasRef.current; if(!canvas) return;\r\n      const ctx = canvas.getContext('2d')!;\r\n      const w = canvas.width, h = canvas.height;\r\n      ctx.clearRect(0,0,w,h);\r\n      const g = ctx.createLinearGradient(0,0,0,h); g.addColorStop(0,'rgba(4,12,20,0.6)'); g.addColorStop(1,'rgba(2,6,10,0.6)');\r\n      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);\r\n      \r\n      const fromResultChaos = result? (idx>65?0.6: idx>40?1.2:2.8) : 1.5;\r\n      const fromResultHue = idx>65?150: idx>40?45:0;\r\n      const chaos = gaiaChaos ?? fromResultChaos;\r\n      const hue = gaiaHue ?? fromResultHue;\r\n      \r\n      // Draw more dramatic filaments based on chaos\r\n      const cols = Math.round(16 + (1/Math.max(1, chaos))*24);\r\n      for(let i=0;i<cols;i++){\r\n        const baseX = (i+0.5)/cols * w;\r\n        let x = baseX + 60*Math.sin((tick + i*20)/60) * chaos;\r\n        let y = 20;\r\n        ctx.beginPath(); ctx.moveTo(x,y);\r\n        const segments = 8;\r\n        for(let s=0;s<segments;s++){\r\n          const amp = Math.max(0.5, (1 - s/segments)) * chaos;\r\n          const cx = x + (Math.random()-0.5)*100*amp + 30*Math.sin((tick + i*10 + s*5)/30);\r\n          const cy = y + (s+1) * (h/(segments+1)) + 15*Math.cos((tick + i*7 + s*11)/35);\r\n          const nx = baseX + (s+1)*(w/(segments+2) - w/(cols*segments)) + Math.sin((tick + s*i)/25)*80*amp;\r\n          ctx.quadraticCurveTo(cx,cy,nx,cy+10);\r\n          x = nx; y = cy+10;\r\n        }\r\n        ctx.lineWidth = 1.0 + 2.0*(1 - idx/100);\r\n        const opacity = 0.4 + (0.8 - chaos/5);\r\n        ctx.strokeStyle = `hsla(${hue},85%,${50 + 25*Math.sin((tick+i)/25)}%,${opacity})`;\r\n        ctx.stroke();\r\n      }\r\n      \r\n      // Enhanced pulsing core\r\n      const cx = w*0.75, cy = h*0.5;\r\n      const pulse = 25 + (result? (result.index/100)*80 : 40) * Math.abs(Math.sin(tick/35));\r\n      const g2 = ctx.createRadialGradient(cx,cy,pulse*0.05,cx,cy,pulse*3.5);\r\n      g2.addColorStop(0,`hsla(${hue},95%,65%,${0.3})`);\r\n      g2.addColorStop(0.5,`hsla(${hue},80%,50%,${0.1})`);\r\n      g2.addColorStop(1,'rgba(10,12,18,0)');\r\n      ctx.fillStyle = g2; ctx.beginPath(); ctx.arc(cx,cy,pulse*3.5,0,Math.PI*2); ctx.fill();\r\n      \r\n      setTick(t => t+1);\r\n      raf = requestAnimationFrame(draw);\r\n    }\r\n    raf = requestAnimationFrame(draw);\r\n    return ()=>cancelAnimationFrame(raf);\r\n  },[result, gaiaChaos, gaiaHue]);\r\n\r\n  return (\r\n    <div style={{display:'flex',flexDirection:'column',gap:12}}>\r\n      {/* Top Section: Canvas, Bar, and Right Panel */}\r\n      <div style={{display:'flex',gap:12,alignItems:'flex-start'}}>\r\n        <div style={{flex:1}}>\r\n          <canvas id=\"nexusCanvas\" ref={canvasRef} width={800} height={340} style={{borderRadius:10, display:'block', background:'linear-gradient(180deg, rgba(2,8,14,0.6), rgba(3,12,20,0.6))'}} />\r\n          \r\n          {/* Threat vs Recovery Bar */}\r\n          <div style={{marginTop:12, background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10}}>\r\n            <div style={{display:'flex', justifyContent:'space-between', marginBottom:6}}>\r\n              <div className=\"muted-block\">Threat vs Recovery</div>\r\n              <div className=\"pill\" style={{fontSize:11}}>{threat.toFixed(0)} / {recovery.toFixed(0)}</div>\r\n            </div>\r\n            <div style={{display:'flex', height:24, gap:2, borderRadius:6, overflow:'hidden', background:'rgba(0,0,0,0.2)'}}>\r\n              <div style={{\r\n                flex: threat,\r\n                background: threat > 50 ? 'linear-gradient(90deg, #ff4444, #ff6b6b)' : threat > 25 ? 'linear-gradient(90deg, #ffa500, #ffb84d)' : 'linear-gradient(90deg, #ff9999, #ffcccc)',\r\n                transition: 'all 0.3s ease',\r\n                borderRadius: threat > 0 ? '6px 0 0 6px' : 0,\r\n                display:'flex', alignItems:'center', justifyContent:'center',\r\n                fontSize:10,\r\n                color:'rgba(255,255,255,0.7)',\r\n                fontWeight:600\r\n              }}>\r\n                {threat > 10 && `${threat.toFixed(0)}%`}\r\n              </div>\r\n              <div style={{\r\n                flex: recovery,\r\n                background: recovery > 70 ? 'linear-gradient(90deg, #2de8a7, #20e07a)' : recovery > 40 ? 'linear-gradient(90deg, #56c8ff, #3ad1ff)' : 'linear-gradient(90deg, #ff9f6b, #ffc46a)',\r\n                transition: 'all 0.3s ease',\r\n                borderRadius: recovery > 0 ? '0 6px 6px 0' : 0,\r\n                display:'flex', alignItems:'center', justifyContent:'center',\r\n                fontSize:10,\r\n                color:'rgba(255,255,255,0.9)',\r\n                fontWeight:600\r\n              }}>\r\n                {recovery > 10 && `${recovery.toFixed(0)}%`}\r\n              </div>\r\n            </div>\r\n            <div style={{display:'flex', justifyContent:'space-between', marginTop:4, fontSize:11}}>\r\n              <span className=\"muted\">Stress</span>\r\n              <span className=\"muted\">Stability</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{width:300}}>\r\n          {/* Earth Preview */}\r\n          <div style={{background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10, textAlign:'center', marginBottom:12}}>\r\n            <div className=\"muted-block\">Earth State</div>\r\n            <div style={{marginTop:8, display:'flex', justifyContent:'center'}}>\r\n              <EarthPreview size={140} />\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{background:'rgba(255,255,255,0.02)', padding:10, borderRadius:10}}>\r\n            <div style={{display:'flex',alignItems:'center',gap:10}}>\r\n              <div className=\"pill\" id=\"nexusMoodTag\">\r\n                {state && !loading ? (\r\n                  state.mood || (idx > 65 ? 'Harmonic' : idx > 40 ? 'Tense' : 'Stressed')\r\n                ) : (\r\n                  result ? (result.index > 65 ? 'Harmonic' : result.index > 40 ? 'Tense' : 'Stressed') : '—'\r\n                )}\r\n              </div>\r\n              <div style={{flex:1}}>\r\n                <div className=\"muted-block\">Symbiosis index</div>\r\n                <div id=\"nexusIndex\" style={{fontWeight:700,fontSize:22}}>\r\n                  {state && !loading ? idx.toFixed(0) : (result ? result.index : '—')}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div style={{display:'flex', gap:8, marginTop:8, alignItems:'center'}}>\r\n              <div className=\"muted-block\">Risk</div>\r\n              <div className=\"pill\" style={{fontSize:12}}>\r\n                {gaiaRisk ? (gaiaRisk * 100).toFixed(0) + '%' : (result?.risk ?? '—')}\r\n              </div>\r\n              {gaiaTint ? (\r\n                <div style={{marginLeft:'auto', display:'flex', alignItems:'center', gap:8}}>\r\n                  <div className=\"muted-block\">Tint</div>\r\n                  <div style={{width:22,height:22,borderRadius:6,background:gaiaTint,border:'1px solid rgba(255,255,255,0.06)'}} />\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n            <div style={{marginTop:8}}>\r\n              <div className=\"muted-block\">Timeline</div>\r\n              <input id=\"timeSlider\" type=\"range\" min={0} max={100} defaultValue={100} />\r\n              <div style={{display:'flex', gap:8, marginTop:8}}>\r\n                <button className=\"gaia-btn primary\" id=\"recompute\">Recompute Visuals</button>\r\n                <button className=\"gaia-btn ghost\" onClick={() => refresh()} disabled={loading}>{loading ? 'Syncing...' : 'Sync GAIA State'}</button>\r\n                <button className=\"gaia-btn ghost\" id=\"exportPNG\" onClick={()=>{\r\n                  const canvas = canvasRef.current; if(!canvas) return;\r\n                  const a = document.createElement('a'); a.href = canvas.toDataURL('image/png'); a.download = 'gaia_nexus.png'; a.click();\r\n                }}>Export PNG</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Full Width Interpretation Section */}\r\n      <div style={{background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10}}>\r\n        <div className=\"muted-block\">Interpretation</div>\r\n        <div id=\"nexusText\" style={{marginTop:8, fontSize:13, lineHeight:1.6}}>\r\n          {result || state ? (\r\n            <>\r\n              <strong>Simulation Results:</strong> Climate impact trajectory shows ΔT {state?.gaia_link?.delta_temp ?? result?.tempDrift ?? '—'}°C, biodiversity index at {idx.toFixed(0)}/100, and sea level rise of +{state?.gaia_link?.sea_level ?? result?.seaLevel ?? '—'}m. Ecosystem stress level: {idx > 65 ? 'Low' : idx > 40 ? 'Moderate' : 'High'}.\r\n              <br/>\r\n              <br/>\r\n              <strong>Risk Assessment:</strong> {gaiaRisk ? `Global risk metric: ${(gaiaRisk * 100).toFixed(0)}%.` : 'Calculating planetary risk...'}\r\n              {state?.mood && ` Current GAIA mood: ${state.mood}.`}\r\n              <br/>\r\n              <br/>\r\n              {symbioSummary && (\r\n                <>\r\n                  <strong>Ground Truth (SymbioSphere):</strong> {symbioSummary}\r\n                  {symbioDetails && (\r\n                    <>\r\n                      <br/>\r\n                      <strong>Observations:</strong> {symbioDetails}\r\n                    </>\r\n                  )}\r\n                  <br/>\r\n                  <br/>\r\n                </>\r\n              )}\r\n              <strong>Nexus Filaments:</strong> The animated filament patterns reflect ecosystem connectivity and stress propagation. More chaotic patterns indicate higher environmental turbulence; stable patterns suggest resilience. The color hue (0-360°) encodes systemic balance.\r\n            </>\r\n          ) : (\r\n            'Run a simulation to populate Nexus with a living structure built from the prediction. The filament animation will visualize ecosystem stress and recovery dynamics in real-time.'\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AAEvB;AACA;AACA;;;AAHA;;;;AAKe,SAAS,MAAM,EAAE,MAAM,EAAoB;;IACxD,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,iIAAY;IAChD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAS;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAS;IAE3D,yCAAyC;IACzC,IAAA,0KAAS;2BAAC;YACR,MAAM,MAAM,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,eAAe;YAC3D,IAAI,IAAI,MAAM,GAAG,GAAG;gBAClB,MAAM,gBAAgB,IAAI,MAAM;uCAAC,CAAC,IAAW,EAAE,KAAK,KAAK;sCAAY,MAAM;gBAC3E,MAAM,eAAe,IAAI,MAAM;uCAAC,CAAC,IAAW,EAAE,KAAK,KAAK;sCAAW,MAAM;gBACzE,MAAM,YAAY,IAAI,MAAM;uCAAC,CAAC,IAAW,EAAE,KAAK,KAAK,eAAe,EAAE,KAAK,KAAK;sCAAQ,MAAM;gBAC9F,MAAM,aAAa;uBAAI,IAAI,IAAI,IAAI,GAAG;2CAAC,CAAC,IAAW,EAAE,IAAI;;iBAAG;gBAE5D,kCAAkC;gBAClC,MAAM,qBAAqB,IAAI,KAAK,GAAG,OAAO,GAAG,GAAG;0DAAC,CAAC;wBACpD,OAAO,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE;oBACxD;yDAAG,IAAI,CAAC;gBAER,MAAM,UAAU,GAAG,IAAI,MAAM,CAAC,eAAe,EAAE,UAAU,WAAW,EAAE,aAAa,WAAW,EAAE,cAAc,uBAAuB,EAAE,WAAW,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC/J,iBAAiB;gBACjB,iBAAiB;YACnB;QACF;0BAAG,EAAE;IAEL,MAAM,YAAY,CAAC,WAAW,OAAO,OAAO,SAAS,OAAO,MAAM,KAAK,CAAC,KAAK,GAAG;IAChF,MAAM,UAAU,CAAC,WAAW,OAAO,OAAO,OAAO,OAAO,MAAM,KAAK,CAAC,GAAG,GAAG;IAC1E,MAAM,WAAW,CAAC,WAAW,OAAO,QAAQ,OAAO,MAAM,IAAI,GAAG;IAChE,MAAM,WAAW,CAAC,WAAW,OAAO,aAAa,MAAM,UAAU,GAAG;IAEpE,MAAM,YAAY,IAAA,uKAAM,EAAyB;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,gEAAgE;IAChE,MAAM,kBAAkB,OAAO,WAAW,gBAAiB,QAAQ,SAAS;IAC5E,MAAM,MAAM,SAAS,CAAC,UAAU,kBAAmB,QAAQ,SAAS;IACpE,MAAM,SAAS,KAAK,GAAG,CAAC,GAAG,MAAM;IACjC,MAAM,WAAW;IAEjB,IAAA,0KAAS;2BAAC;YACR,IAAI,MAAM;YACV,SAAS;gBACP,MAAM,SAAS,UAAU,OAAO;gBAAE,IAAG,CAAC,QAAQ;gBAC9C,MAAM,MAAM,OAAO,UAAU,CAAC;gBAC9B,MAAM,IAAI,OAAO,KAAK,EAAE,IAAI,OAAO,MAAM;gBACzC,IAAI,SAAS,CAAC,GAAE,GAAE,GAAE;gBACpB,MAAM,IAAI,IAAI,oBAAoB,CAAC,GAAE,GAAE,GAAE;gBAAI,EAAE,YAAY,CAAC,GAAE;gBAAsB,EAAE,YAAY,CAAC,GAAE;gBACrG,IAAI,SAAS,GAAG;gBAAG,IAAI,QAAQ,CAAC,GAAE,GAAE,GAAE;gBAEtC,MAAM,kBAAkB,SAAS,MAAI,KAAG,MAAK,MAAI,KAAG,MAAI,MAAO;gBAC/D,MAAM,gBAAgB,MAAI,KAAG,MAAK,MAAI,KAAG,KAAG;gBAC5C,MAAM,QAAQ,aAAa;gBAC3B,MAAM,MAAM,WAAW;gBAEvB,8CAA8C;gBAC9C,MAAM,OAAO,KAAK,KAAK,CAAC,KAAK,AAAC,IAAE,KAAK,GAAG,CAAC,GAAG,SAAQ;gBACpD,IAAI,IAAI,IAAE,GAAE,IAAE,MAAK,IAAI;oBACrB,MAAM,QAAQ,CAAC,IAAE,GAAG,IAAE,OAAO;oBAC7B,IAAI,IAAI,QAAQ,KAAG,KAAK,GAAG,CAAC,CAAC,OAAO,IAAE,EAAE,IAAE,MAAM;oBAChD,IAAI,IAAI;oBACR,IAAI,SAAS;oBAAI,IAAI,MAAM,CAAC,GAAE;oBAC9B,MAAM,WAAW;oBACjB,IAAI,IAAI,IAAE,GAAE,IAAE,UAAS,IAAI;wBACzB,MAAM,MAAM,KAAK,GAAG,CAAC,KAAM,IAAI,IAAE,YAAa;wBAC9C,MAAM,KAAK,IAAI,CAAC,KAAK,MAAM,KAAG,GAAG,IAAE,MAAI,MAAM,KAAG,KAAK,GAAG,CAAC,CAAC,OAAO,IAAE,KAAK,IAAE,CAAC,IAAE;wBAC7E,MAAM,KAAK,IAAI,CAAC,IAAE,CAAC,IAAI,CAAC,IAAE,CAAC,WAAS,CAAC,CAAC,IAAI,KAAG,KAAK,GAAG,CAAC,CAAC,OAAO,IAAE,IAAI,IAAE,EAAE,IAAE;wBAC1E,MAAM,KAAK,QAAQ,CAAC,IAAE,CAAC,IAAE,CAAC,IAAE,CAAC,WAAS,CAAC,IAAI,IAAE,CAAC,OAAK,QAAQ,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,IAAE,CAAC,IAAE,MAAI,KAAG;wBAC7F,IAAI,gBAAgB,CAAC,IAAG,IAAG,IAAG,KAAG;wBACjC,IAAI;wBAAI,IAAI,KAAG;oBACjB;oBACA,IAAI,SAAS,GAAG,MAAM,MAAI,CAAC,IAAI,MAAI,GAAG;oBACtC,MAAM,UAAU,MAAM,CAAC,MAAM,QAAM,CAAC;oBACpC,IAAI,WAAW,GAAG,CAAC,KAAK,EAAE,IAAI,KAAK,EAAE,KAAK,KAAG,KAAK,GAAG,CAAC,CAAC,OAAK,CAAC,IAAE,IAAI,EAAE,EAAE,QAAQ,CAAC,CAAC;oBACjF,IAAI,MAAM;gBACZ;gBAEA,wBAAwB;gBACxB,MAAM,KAAK,IAAE,MAAM,KAAK,IAAE;gBAC1B,MAAM,QAAQ,KAAK,CAAC,SAAQ,AAAC,OAAO,KAAK,GAAC,MAAK,KAAK,EAAE,IAAI,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,OAAK;gBACjF,MAAM,KAAK,IAAI,oBAAoB,CAAC,IAAG,IAAG,QAAM,MAAK,IAAG,IAAG,QAAM;gBACjE,GAAG,YAAY,CAAC,GAAE,CAAC,KAAK,EAAE,IAAI,SAAS,EAAE,IAAI,CAAC,CAAC;gBAC/C,GAAG,YAAY,CAAC,KAAI,CAAC,KAAK,EAAE,IAAI,SAAS,EAAE,IAAI,CAAC,CAAC;gBACjD,GAAG,YAAY,CAAC,GAAE;gBAClB,IAAI,SAAS,GAAG;gBAAI,IAAI,SAAS;gBAAI,IAAI,GAAG,CAAC,IAAG,IAAG,QAAM,KAAI,GAAE,KAAK,EAAE,GAAC;gBAAI,IAAI,IAAI;gBAEnF;4CAAQ,CAAA,IAAK,IAAE;;gBACf,MAAM,sBAAsB;YAC9B;YACA,MAAM,sBAAsB;YAC5B;mCAAO,IAAI,qBAAqB;;QAClC;0BAAE;QAAC;QAAQ;QAAW;KAAQ;IAE9B,qBACE,6LAAC;QAAI,OAAO;YAAC,SAAQ;YAAO,eAAc;YAAS,KAAI;QAAE;;0BAEvD,6LAAC;gBAAI,OAAO;oBAAC,SAAQ;oBAAO,KAAI;oBAAG,YAAW;gBAAY;;kCACxD,6LAAC;wBAAI,OAAO;4BAAC,MAAK;wBAAC;;0CACjB,6LAAC;gCAAO,IAAG;gCAAc,KAAK;gCAAW,OAAO;gCAAK,QAAQ;gCAAK,OAAO;oCAAC,cAAa;oCAAI,SAAQ;oCAAS,YAAW;gCAA8D;;;;;;0CAGrL,6LAAC;gCAAI,OAAO;oCAAC,WAAU;oCAAI,YAAW;oCAA0B,SAAQ;oCAAI,cAAa;gCAAE;;kDACzF,6LAAC;wCAAI,OAAO;4CAAC,SAAQ;4CAAQ,gBAAe;4CAAiB,cAAa;wCAAC;;0DACzE,6LAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,6LAAC;gDAAI,WAAU;gDAAO,OAAO;oDAAC,UAAS;gDAAE;;oDAAI,OAAO,OAAO,CAAC;oDAAG;oDAAI,SAAS,OAAO,CAAC;;;;;;;;;;;;;kDAEtF,6LAAC;wCAAI,OAAO;4CAAC,SAAQ;4CAAQ,QAAO;4CAAI,KAAI;4CAAG,cAAa;4CAAG,UAAS;4CAAU,YAAW;wCAAiB;;0DAC5G,6LAAC;gDAAI,OAAO;oDACV,MAAM;oDACN,YAAY,SAAS,KAAK,6CAA6C,SAAS,KAAK,6CAA6C;oDAClI,YAAY;oDACZ,cAAc,SAAS,IAAI,gBAAgB;oDAC3C,SAAQ;oDAAQ,YAAW;oDAAU,gBAAe;oDACpD,UAAS;oDACT,OAAM;oDACN,YAAW;gDACb;0DACG,SAAS,MAAM,GAAG,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;0DAEzC,6LAAC;gDAAI,OAAO;oDACV,MAAM;oDACN,YAAY,WAAW,KAAK,6CAA6C,WAAW,KAAK,6CAA6C;oDACtI,YAAY;oDACZ,cAAc,WAAW,IAAI,gBAAgB;oDAC7C,SAAQ;oDAAQ,YAAW;oDAAU,gBAAe;oDACpD,UAAS;oDACT,OAAM;oDACN,YAAW;gDACb;0DACG,WAAW,MAAM,GAAG,SAAS,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;;;;;;;kDAG/C,6LAAC;wCAAI,OAAO;4CAAC,SAAQ;4CAAQ,gBAAe;4CAAiB,WAAU;4CAAG,UAAS;wCAAE;;0DACnF,6LAAC;gDAAK,WAAU;0DAAQ;;;;;;0DACxB,6LAAC;gDAAK,WAAU;0DAAQ;;;;;;;;;;;;;;;;;;;;;;;;kCAK9B,6LAAC;wBAAI,OAAO;4BAAC,OAAM;wBAAG;;0CAEpB,6LAAC;gCAAI,OAAO;oCAAC,YAAW;oCAA0B,SAAQ;oCAAI,cAAa;oCAAI,WAAU;oCAAU,cAAa;gCAAE;;kDAChH,6LAAC;wCAAI,WAAU;kDAAc;;;;;;kDAC7B,6LAAC;wCAAI,OAAO;4CAAC,WAAU;4CAAG,SAAQ;4CAAQ,gBAAe;wCAAQ;kDAC/D,cAAA,6LAAC,yIAAY;4CAAC,MAAM;;;;;;;;;;;;;;;;;0CAIxB,6LAAC;gCAAI,OAAO;oCAAC,YAAW;oCAA0B,SAAQ;oCAAI,cAAa;gCAAE;;kDAC3E,6LAAC;wCAAI,OAAO;4CAAC,SAAQ;4CAAO,YAAW;4CAAS,KAAI;wCAAE;;0DACpD,6LAAC;gDAAI,WAAU;gDAAO,IAAG;0DACtB,SAAS,CAAC,UACT,MAAM,IAAI,IAAI,CAAC,MAAM,KAAK,aAAa,MAAM,KAAK,UAAU,UAAU,IAEtE,SAAU,OAAO,KAAK,GAAG,KAAK,aAAa,OAAO,KAAK,GAAG,KAAK,UAAU,aAAc;;;;;;0DAG3F,6LAAC;gDAAI,OAAO;oDAAC,MAAK;gDAAC;;kEACjB,6LAAC;wDAAI,WAAU;kEAAc;;;;;;kEAC7B,6LAAC;wDAAI,IAAG;wDAAa,OAAO;4DAAC,YAAW;4DAAI,UAAS;wDAAE;kEACpD,SAAS,CAAC,UAAU,IAAI,OAAO,CAAC,KAAM,SAAS,OAAO,KAAK,GAAG;;;;;;;;;;;;;;;;;;kDAIrE,6LAAC;wCAAI,OAAO;4CAAC,SAAQ;4CAAQ,KAAI;4CAAG,WAAU;4CAAG,YAAW;wCAAQ;;0DAClE,6LAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,6LAAC;gDAAI,WAAU;gDAAO,OAAO;oDAAC,UAAS;gDAAE;0DACtC,WAAW,CAAC,WAAW,GAAG,EAAE,OAAO,CAAC,KAAK,MAAO,QAAQ,QAAQ;;;;;;4CAElE,yBACC,6LAAC;gDAAI,OAAO;oDAAC,YAAW;oDAAQ,SAAQ;oDAAQ,YAAW;oDAAU,KAAI;gDAAC;;kEACxE,6LAAC;wDAAI,WAAU;kEAAc;;;;;;kEAC7B,6LAAC;wDAAI,OAAO;4DAAC,OAAM;4DAAG,QAAO;4DAAG,cAAa;4DAAE,YAAW;4DAAS,QAAO;wDAAkC;;;;;;;;;;;uDAE5G;;;;;;;kDAEN,6LAAC;wCAAI,OAAO;4CAAC,WAAU;wCAAC;;0DACtB,6LAAC;gDAAI,WAAU;0DAAc;;;;;;0DAC7B,6LAAC;gDAAM,IAAG;gDAAa,MAAK;gDAAQ,KAAK;gDAAG,KAAK;gDAAK,cAAc;;;;;;0DACpE,6LAAC;gDAAI,OAAO;oDAAC,SAAQ;oDAAQ,KAAI;oDAAG,WAAU;gDAAC;;kEAC7C,6LAAC;wDAAO,WAAU;wDAAmB,IAAG;kEAAY;;;;;;kEACpD,6LAAC;wDAAO,WAAU;wDAAiB,SAAS,IAAM;wDAAW,UAAU;kEAAU,UAAU,eAAe;;;;;;kEAC1G,6LAAC;wDAAO,WAAU;wDAAiB,IAAG;wDAAY,SAAS;4DACzD,MAAM,SAAS,UAAU,OAAO;4DAAE,IAAG,CAAC,QAAQ;4DAC9C,MAAM,IAAI,SAAS,aAAa,CAAC;4DAAM,EAAE,IAAI,GAAG,OAAO,SAAS,CAAC;4DAAc,EAAE,QAAQ,GAAG;4DAAkB,EAAE,KAAK;wDACvH;kEAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQb,6LAAC;gBAAI,OAAO;oBAAC,YAAW;oBAA0B,SAAQ;oBAAI,cAAa;gBAAE;;kCAC3E,6LAAC;wBAAI,WAAU;kCAAc;;;;;;kCAC7B,6LAAC;wBAAI,IAAG;wBAAY,OAAO;4BAAC,WAAU;4BAAG,UAAS;4BAAI,YAAW;wBAAG;kCACjE,UAAU,sBACT;;8CACE,6LAAC;8CAAO;;;;;;gCAA4B;gCAAqC,OAAO,WAAW,cAAc,QAAQ,aAAa;gCAAI;gCAA2B,IAAI,OAAO,CAAC;gCAAG;gCAA8B,OAAO,WAAW,aAAa,QAAQ,YAAY;gCAAI;gCAA4B,MAAM,KAAK,QAAQ,MAAM,KAAK,aAAa;gCAAO;8CAC/U,6LAAC;;;;;8CACD,6LAAC;;;;;8CACD,6LAAC;8CAAO;;;;;;gCAAyB;gCAAE,WAAW,CAAC,oBAAoB,EAAE,CAAC,WAAW,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,GAAG;gCACtG,OAAO,QAAQ,CAAC,oBAAoB,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;8CACpD,6LAAC;;;;;8CACD,6LAAC;;;;;gCACA,+BACC;;sDACE,6LAAC;sDAAO;;;;;;wCAAqC;wCAAE;wCAC9C,+BACC;;8DACE,6LAAC;;;;;8DACD,6LAAC;8DAAO;;;;;;gDAAsB;gDAAE;;;sDAGpC,6LAAC;;;;;sDACD,6LAAC;;;;;;;8CAGL,6LAAC;8CAAO;;;;;;gCAAyB;;2CAGnC;;;;;;;;;;;;;;;;;;AAMZ;GAlOwB;;QACc,iIAAY;;;KAD1B","debugId":null}},
    {"offset": {"line": 1195, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/PreviewCanvas.tsx"],"sourcesContent":["// components/PreviewCanvas.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nexport default function PreviewCanvas({ index }: { index?: number }){\r\n  const ref = useRef<HTMLCanvasElement|null>(null);\r\n  useEffect(()=>{\r\n    const c = ref.current; if(!c) return;\r\n    const ctx = c.getContext('2d')!;\r\n    function draw(){\r\n      const w = c.width, h = c.height; ctx.clearRect(0,0,w,h);\r\n      const idx = (typeof index === 'number') ? index : (JSON.parse(localStorage.getItem('gaia_result') || 'null')?.index || 50);\r\n      const g = ctx.createLinearGradient(0,0,w,0);\r\n      g.addColorStop(0,'rgba(255,255,255,0.02)'); g.addColorStop(1,'rgba(255,255,255,0.01)');\r\n      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);\r\n      const threat = 100 - idx;\r\n      ctx.fillStyle = 'rgba(255,80,80,0.18)'; ctx.fillRect(10,20,(threat/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(30,200,110,0.18)'; ctx.fillRect(10,20,((idx)/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(255,255,255,0.9)'; ctx.font='12px sans-serif';\r\n      \r\n    }\r\n    draw();\r\n    const t = setInterval(draw, 800);\r\n    return ()=>clearInterval(t);\r\n  },[index]);\r\n  return <canvas id=\"previewCanvas\" ref={ref} width={0} height={0} style={{marginTop:12,borderRadius:10, background:'transparent'}}/>;\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAE/B;;;AADA;;AAGe,SAAS,cAAc,EAAE,KAAK,EAAsB;;IACjE,MAAM,MAAM,IAAA,uKAAM,EAAyB;IAC3C,IAAA,0KAAS;mCAAC;YACR,MAAM,IAAI,IAAI,OAAO;YAAE,IAAG,CAAC,GAAG;YAC9B,MAAM,MAAM,EAAE,UAAU,CAAC;YACzB,SAAS;gBACP,MAAM,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM;gBAAE,IAAI,SAAS,CAAC,GAAE,GAAE,GAAE;gBACrD,MAAM,MAAM,AAAC,OAAO,UAAU,WAAY,QAAS,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,kBAAkB,SAAS,SAAS;gBACvH,MAAM,IAAI,IAAI,oBAAoB,CAAC,GAAE,GAAE,GAAE;gBACzC,EAAE,YAAY,CAAC,GAAE;gBAA2B,EAAE,YAAY,CAAC,GAAE;gBAC7D,IAAI,SAAS,GAAG;gBAAG,IAAI,QAAQ,CAAC,GAAE,GAAE,GAAE;gBACtC,MAAM,SAAS,MAAM;gBACrB,IAAI,SAAS,GAAG;gBAAwB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAC,SAAO,MAAK,CAAC,IAAE,EAAE,GAAE;gBAC/E,IAAI,SAAS,GAAG;gBAAyB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAE,MAAK,MAAK,CAAC,IAAE,EAAE,GAAE;gBAC/E,IAAI,SAAS,GAAG;gBAAyB,IAAI,IAAI,GAAC;YAEpD;YACA;YACA,MAAM,IAAI,YAAY,MAAM;YAC5B;2CAAO,IAAI,cAAc;;QAC3B;kCAAE;QAAC;KAAM;IACT,qBAAO,6LAAC;QAAO,IAAG;QAAgB,KAAK;QAAK,OAAO;QAAG,QAAQ;QAAG,OAAO;YAAC,WAAU;YAAG,cAAa;YAAI,YAAW;QAAa;;;;;;AACjI;GAtBwB;KAAA","debugId":null}},
    {"offset": {"line": 1267, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaSimulation.ts"],"sourcesContent":["// lib/useGaiaSimulation.ts\r\n'use client';\r\nimport { useCallback, useEffect, useState } from 'react';\r\n\r\nexport default function useGaiaSimulation() {\r\n  const [inputs, setInputs] = useState<any>({\r\n    co2: 40,\r\n    def: 20,\r\n    ren: 55,\r\n    pol: 35,\r\n    pop: 20,\r\n    airweaver: false,\r\n    airweaver_int: 40,\r\n    algae: false,\r\n    algae_int: 30,\r\n    cryo: false,\r\n    cryo_int: 20,\r\n    biosynth: false,\r\n    biosynth_int: 10,\r\n    reforest: false,\r\n    reforest_int: 30,\r\n    ccapture: false,\r\n    ccapture_int: 25,\r\n    transport: false,\r\n    transport_int: 40,\r\n    urbangreen: false,\r\n    urbangreen_int: 30\r\n  });\r\n  const [method, setMethod] = useState<'manual'|'preset'|'mc'|'ai'>('manual');\r\n  const [result, setResult] = useState<any>(null);\r\n\r\n  const clamp = (v:number, min:number, max:number) => Math.max(min, Math.min(max, v));\r\n\r\n  const compute = useCallback((vals:any) => {\r\n    const co2 = clamp(vals.co2,0,100);\r\n    const def = clamp(vals.def,0,100);\r\n    const pop = clamp(vals.pop,-20,80);\r\n    const ren = clamp(vals.ren,0,100);\r\n    const pol = clamp(vals.pol,0,100);\r\n\r\n    const interventions = {\r\n      airweaver: vals.airweaver ? clamp(vals.airweaver_int,0,100):0,\r\n      algae: vals.algae ? clamp(vals.algae_int,0,100):0,\r\n      cryo: vals.cryo ? clamp(vals.cryo_int,0,100):0,\r\n      biosynth: vals.biosynth ? clamp(vals.biosynth_int,0,100):0,\r\n      reforest: vals.reforest ? clamp(vals.reforest_int,0,100):0,\r\n      ccapture: vals.ccapture ? clamp(vals.ccapture_int,0,100):0,\r\n      transport: vals.transport ? clamp(vals.transport_int,0,100):0,\r\n      urbangreen: vals.urbangreen ? clamp(vals.urbangreen_int,0,100):0\r\n    };\r\n\r\n    const p_co2 = co2 * 0.32;\r\n    const p_def = def * 0.22;\r\n    const p_pop = (pop>0?pop:0) * 0.10;\r\n    const base_positive = ren * 0.28 + pol * 0.18;\r\n\r\n    function eff(x:number, weight:number){\r\n      return weight * (0.2 + 0.8 * Math.tanh(x/120 * 2.5));\r\n    }\r\n    const iv = interventions;\r\n    const interventionScore =\r\n      eff(iv.airweaver, 18) + eff(iv.algae, 12) + eff(iv.cryo, 10) +\r\n      eff(iv.biosynth, 10) + eff(iv.reforest, 24) + eff(iv.ccapture, 16) +\r\n      eff(iv.transport, 20) + eff(iv.urbangreen, 12);\r\n\r\n    let raw = 50\r\n      + (base_positive * 0.24)\r\n      + (interventionScore * 0.5)\r\n      - (p_co2 * 0.35)\r\n      - (p_def * 0.28)\r\n      - (p_pop * 0.4);\r\n\r\n    if(co2 > 80) raw -= (co2-80)*0.35;\r\n    if(def > 70) raw -= (def-70)*0.25;\r\n\r\n    const index = Math.round(clamp(raw, 0, 100));\r\n    const tempDrift = Number(((co2/100)*2.5 - (interventionScore/200)).toFixed(2));\r\n    const biodiversity = Math.round(50 + (index-50)*0.6);\r\n    const seaLevel = Number(((def/100)*0.15 + (co2/100)*0.1 - (iv.reforest? iv.reforest/100*0.02 : 0)).toFixed(3));\r\n\r\n    return { index, tempDrift, biodiversity, seaLevel, interventionsApplied: interventions };\r\n  }, []);\r\n\r\n  const simulate = useCallback(() => {\r\n    const r = compute(inputs);\r\n    setResult(r);\r\n    localStorage.setItem('gaia_result', JSON.stringify(r));\r\n    return r;\r\n  }, [inputs, compute]);\r\n\r\n  const applyAISuggestion = useCallback(() => {\r\n    setInputs(prev => {\r\n      const base = {...prev};\r\n      if(base.co2 > 55){\r\n        base.ren = clamp(base.ren + 25,0,100);\r\n        base.ccapture = true; base.ccapture_int = 60;\r\n        base.reforest = true; base.reforest_int = 45;\r\n        base.transport = true; base.transport_int = 50;\r\n      } else if(base.def > 50){\r\n        base.reforest = true; base.reforest_int = 70;\r\n        base.urbangreen = true; base.urbangreen_int = 40;\r\n      } else {\r\n        base.pol = clamp(base.pol + 20,0,100);\r\n        base.urbangreen = true; base.urbangreen_int = 35;\r\n      }\r\n      return base;\r\n    });\r\n  }, []);\r\n\r\n  const runMonteCarlo = useCallback((runs = 40) => {\r\n    const results:number[] = [];\r\n    for(let i=0;i<runs;i++){\r\n      const base = JSON.parse(JSON.stringify(inputs));\r\n      ['co2','def','ren','pol','pop'].forEach((k:any)=> {\r\n        const jitter = (Math.random()*0.5 - 0.25);\r\n        base[k] = clamp(Math.round(base[k] * (1 + jitter)), -20, 100);\r\n      });\r\n      ['airweaver','algae','cryo','biosynth','reforest','ccapture','transport','urbangreen'].forEach((k:any)=>{\r\n        if(base[k]) base[k+'_int'] = clamp(Math.round(base[k+'_int'] * (0.6 + Math.random()*0.9)), 0, 100);\r\n        else if(Math.random() < 0.08) { base[k+'_int'] = Math.round(Math.random()*60); base[k]=true; }\r\n      });\r\n      const r = compute(base);\r\n      results.push(r.index);\r\n    }\r\n    const avg = Math.round(results.reduce((a,b)=>a+b,0)/results.length);\r\n    const baseComputed = compute(inputs);\r\n    baseComputed.index = avg;\r\n    setResult(baseComputed);\r\n    localStorage.setItem('gaia_result', JSON.stringify(baseComputed));\r\n    return baseComputed;\r\n  }, [inputs, compute]);\r\n\r\n  useEffect(()=> {\r\n    const raw = localStorage.getItem('gaia_result');\r\n    if(raw) setResult(JSON.parse(raw));\r\n  }, []);\r\n\r\n  // scenario save / load\r\n  const saveScenario = useCallback((name:string) => {\r\n    const s = JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n    s.push({name, vals: inputs, created: Date.now()});\r\n    localStorage.setItem('gaia_scenarios', JSON.stringify(s));\r\n  }, [inputs]);\r\n\r\n  const loadScenarioList = useCallback(()=> {\r\n    return JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n  }, []);\r\n\r\n  return {\r\n    inputs, setInputs, method, setMethod, result,\r\n    simulate, applyAISuggestion, runMonteCarlo, saveScenario, loadScenarioList,\r\n    setResult\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1485, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/app/nexus/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Chatbot from \"@/components/Chatbot\";\r\nimport Nexus from '../../components/Nexus';\r\nimport PreviewCanvas from '../../components/PreviewCanvas';\r\nimport useGaiaSimulation from '../../lib/useGaiaSimulation';\r\n'use client';\r\n\r\n\r\nimport SimulationUI from \"@/components/SimulationUI\";\r\nimport GaiaLink from '../../components/GaiaLink';\r\n\r\nimport useGaiaState from '../../lib/useGaiaState';\r\n\r\nimport SimulationPage from '../simulation/page';\r\n\r\n\r\n  function hexToRgba(hex: string, alpha = 0.18) {\r\n    if (!hex) return `rgba(255,100,0,${alpha})`;\r\n    let h = hex.replace('#', '');\r\n    if (h.length === 3) h = h.split('').map((c) => c + c).join('');\r\n    const num = parseInt(h, 16);\r\n    const r = (num >> 16) & 255;\r\n    const g = (num >> 8) & 255;\r\n    const b = num & 255;\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  }\r\n\r\n\r\nexport default function NexusPage() {\r\n  const { result } = useGaiaSimulation();\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n                    <div style={{marginTop:18}}>\r\n                <Nexus result={result} />\r\n              </div>\r\n      <main className=\"wrap\">\r\n        {/* Paste ONLY Nexus canvas + UI here */}\r\n        <section>\r\n                <aside className=\"card\" style={{display:'flex', flexDirection:'column'}}>\r\n                  <h3 style={{marginTop:0}}>Visual Preview — “Future Earth”</h3>\r\n                  <div className=\"muted\">Live NASA satellite view of Earth and predictive model overlay</div>\r\n                  <div style={{display:'flex', flexDirection:'column', gap:10, alignItems:'center', marginTop:10}}>\r\n                    <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                      <img id=\"earthBase\" src=\"https://gibs.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/jpeg&LAYERS=BlueMarble_ShadedRelief_Bathymetry&WIDTH=512&HEIGHT=256&CRS=EPSG:4326&BBOX=-180,-90,180,90\" alt=\"Earth live map\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)', objectFit:'cover',display:'block'}} />\r\n                      <div className=\"pill\" style={{position:'absolute', left:8, top:8}}>Now</div>\r\n                    </div>\r\n                    <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                      <img id=\"earthPred\" src=\"https://gibs.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/jpeg&LAYERS=MODIS_Terra_CorrectedReflectance_TrueColor&WIDTH=512&HEIGHT=256&CRS=EPSG:4326&BBOX=-180,-90,180,90\" alt=\"Predicted Earth map\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)',objectFit:'cover',display:'block', mixBlendMode:'multiply'}} />\r\n                      <div id=\"predTag\" className=\"pill\" style={{position:'absolute', right:8, top:8}}>Predicted</div>\r\n                      <div id=\"predTint\" style={{position:'absolute', inset:0, pointerEvents:'none', borderRadius:12}} />\r\n                    </div>\r\n                  </div>\r\n        \r\n                 \r\n        \r\n                          <PreviewCanvas index={result?.index} />\r\n                        </aside>\r\n                                <aside className=\"card\" style={{display:'flex', flexDirection:'column'}}>\r\n                                  <h3 style={{marginTop:0}}>Visual Preview — “Future Earth”</h3>\r\n                                  <div className=\"muted\">High-resolution satellite imagery with predictive climate overlay</div>\r\n                                  <div style={{display:'flex', flexDirection:'column', gap:10, alignItems:'center', marginTop:10}}>\r\n                                    <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                                      <img id=\"earthBase\" src=\"https://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57730/land_ocean_ice_2048.jpg\" alt=\"Earth current state\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)', objectFit:'cover',display:'block'}} />\r\n                                      <div className=\"pill\" style={{position:'absolute', left:8, top:8}}>Current State</div>\r\n                                    </div>\r\n                                    <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                                      <img id=\"earthPred\" src=\"https://upload.wikimedia.org/wikipedia/commons/9/97/The_Earth_seen_from_Apollo_17.jpg\" alt=\"Projected Earth state\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)',objectFit:'cover',display:'block'}} />\r\n                                      <div id=\"predTag\" className=\"pill\" style={{position:'absolute', right:8, top:8}}>{state?.gaia_link?.delta_temp ? `Projected +${state.gaia_link.delta_temp}°C` : 'Projected +2°C'}</div>\r\n                                      <div id=\"predTint\" style={{position:'absolute', inset:0, pointerEvents:'none', borderRadius:12, background: state?.earth_tint ? hexToRgba(state.earth_tint, 0.18) : 'rgba(255, 100, 0, 0.15)'}} />\r\n                                    </div>\r\n                                    <div style={{width:'100%', maxWidth:800, display:'flex', justifyContent:'flex-end'}}>\r\n                                      <button className=\"gaia-btn\" onClick={() => refresh()} disabled={loading} style={{marginTop:8}}>{loading ? 'Refreshing…' : 'Refresh GAIA State'}</button>\r\n                                    </div>\r\n                                  </div>\r\n                        \r\n                                  <PreviewCanvas index={result?.index} />\r\n                                </aside>\r\n                </section>\r\n              </main>\r\n        \r\n\r\n        \r\n              \r\n        \r\n      <Chatbot />\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}