{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Navbar() {\r\n  const path = usePathname();\r\n\r\n  const tab = (href: string, label: string) => (\r\n    <Link\r\n      href={href}\r\n      className={`gaia-btn pill ${path === href ? \"primary\" : \"ghost\"}`}\r\n\r\n    >\r\n      {label}\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"brand\">\r\n        <div className=\"logo\" />\r\n        <div>\r\n          <h1>GAIA Link â€” Demo</h1>\r\n          <div className=\"muted\">Simulation Hub Â· SymbioSphere Â· Nexus Â· Eco-Tracker</div>\r\n        </div>\r\n      </div>\r\n      <nav>\r\n        {tab(\"/\", \"Home\")}\r\n        {tab(\"/about\", \"About\")}\r\n        {tab(\"/gaia-link\", \"GAIA Link\")}\r\n        {tab(\"/symbiosphere\", \"SymbioSphere\")}\r\n        {tab(\"/nexus\", \"Nexus\")}\r\n        {tab(\"/eco-tracker\", \"Eco-Tracker\")}\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,OAAO,IAAA,iJAAW;IAExB,MAAM,MAAM,CAAC,MAAc,sBACzB,8OAAC,uKAAI;YACH,MAAM;YACN,WAAW,CAAC,cAAc,EAAE,SAAS,OAAO,YAAY,SAAS;sBAGhE;;;;;;IAIL,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;;0CACC,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAI,WAAU;0CAAQ;;;;;;;;;;;;;;;;;;0BAG3B,8OAAC;;oBACE,IAAI,KAAK;oBACT,IAAI,UAAU;oBACd,IAAI,cAAc;oBAClB,IAAI,iBAAiB;oBACrB,IAAI,UAAU;oBACd,IAAI,gBAAgB;;;;;;;;;;;;;AAI7B","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Chatbot.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function Chatbot() {\r\n  const [open, setOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [screenImage, setScreenImage] = useState<string | null>(null);\r\n  const [isSharing, setIsSharing] = useState(false);\r\n\r\n  async function captureScreen() {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getDisplayMedia({\r\n        video: true\r\n      });\r\n\r\n      const video = document.createElement('video');\r\n      video.srcObject = stream;\r\n      await video.play();\r\n\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      const ctx = canvas.getContext('2d');\r\n      ctx?.drawImage(video, 0, 0);\r\n\r\n      const imageData = canvas.toDataURL('image/png');\r\n      setScreenImage(imageData);\r\n\r\n      // Stop the stream\r\n      stream.getTracks().forEach(track => track.stop());\r\n      setIsSharing(true);\r\n    } catch (err) {\r\n      console.error('Screen capture failed:', err);\r\n      alert('Screen capture failed. Please allow screen sharing permissions.');\r\n    }\r\n  }\r\n\r\n  async function send(msg: string) {\r\n    const res = await fetch(\"/api/chat\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        messages: [\r\n          { role: \"system\", content: \"You are GAIA.\" },\r\n          { role: \"user\", content: msg }\r\n        ],\r\n        screenImage: screenImage\r\n      }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    return data.reply;\r\n  }\r\n\r\n  async function handleSend() {\r\n    const input = document.getElementById(\"gaia-input\") as HTMLInputElement;\r\n    const text = input.value.trim();\r\n    if (!text) return;\r\n\r\n    input.value = \"\";\r\n\r\n    const reply = await send(text);\r\n\r\n    setMessages((m) => [...m, { user: text, gaia: reply, screenShared: !!screenImage }]);\r\n    setScreenImage(null);\r\n    setIsSharing(false);\r\n  }\r\n\r\n  function resetChat() {\r\n    setMessages([]);\r\n  }\r\n\r\n  async function resetMemory() {\r\n    await fetch(\"/api/resetMemory\");\r\n    alert(\"GAIA memory cleared.\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button className=\"gaia-btn icon chat-toggle\" onClick={() => setOpen(!open)}>\r\n        {open ? \"âœ–\" : \"GAIA\"}\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"chat-popup glass\">\r\n          <div className=\"chat-header\">\r\n            <strong>GAIA Assistant</strong>\r\n          </div>\r\n\r\n          <div className=\"chat-window\">\r\n            {messages.map((m, i) => (\r\n              <div key={i} className=\"chat-block\">\r\n                <div className=\"you\">You: {m.user}</div>\r\n                <div className=\"gaia\">GAIA: {m.gaia}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"chat-controls\">\r\n            <input id=\"gaia-input\" placeholder=\"Ask GAIA...\" />\r\n            <button className=\"gaia-btn secondary\" style={{ fontSize: '12px', padding: '6px 10px' }} onClick={captureScreen}>\r\n              {isSharing ? \"âœ“ Screen\" : \"ðŸ“º Share\"}\r\n            </button>\r\n            <button className=\"gaia-btn primary\" onClick={handleSend}>Send</button>\r\n          </div>\r\n\r\n          <div className=\"chat-actions\">\r\n            <button className=\"gaia-btn pill\" onClick={resetChat}>Clear Chat</button>\r\n            <button className=\"gaia-btn danger\" onClick={resetMemory}>\r\n              Reset Memory\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaState.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function useGaiaState() {\r\n  const [state, setState] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function refresh() {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/state\", { cache: \"no-store\" });\r\n      const json = await res.json();\r\n      setState(json.state);\r\n    } catch (e) {\r\n      console.error(\"GAIA state load error\", e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return { state, loading, refresh };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAM;IACxC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,cAAc;gBAAE,OAAO;YAAW;YAC1D,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS,KAAK,KAAK;QACrB,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QAAE;QAAO;QAAS;IAAQ;AACnC","debugId":null}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/EarthPreview.tsx"],"sourcesContent":["// components/EarthPreview.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport useGaiaState from '@/lib/useGaiaState';\r\n\r\nexport default function EarthPreview({ size = 120, tint, label }: { size?: number; tint?: string; label?: string }) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d')!;\r\n    const w = canvas.width;\r\n    const h = canvas.height;\r\n    const centerX = w / 2;\r\n    const centerY = h / 2;\r\n    const radius = Math.min(w, h) / 2 - 5;\r\n\r\n    // Get tint from prop or state or use default blue\r\n    const earthTint = tint || (!loading && state?.earth_tint ? state.earth_tint : '#1c8cf9');\r\n\r\n    // Draw background\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Draw Earth sphere with gradient\r\n    const gradient = ctx.createRadialGradient(centerX - 10, centerY - 10, 0, centerX, centerY, radius);\r\n    const secondTint = earthTint.startsWith('rgba') ? earthTint.replace(/(\\d+(?:\\.\\d+)?)\\)$/, (match, a) => Math.min(1, parseFloat(a) + 0.3) + ')') : earthTint + 'dd';\r\n    gradient.addColorStop(0, earthTint);\r\n    gradient.addColorStop(0.7, secondTint);\r\n    gradient.addColorStop(1, '#021822');\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Draw Earth outline\r\n    ctx.strokeStyle = 'rgba(255,255,255,0.1)';\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n\r\n    // Add some landmass texture\r\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\r\n    for (let i = 0; i < 5; i++) {\r\n      const angle = (i / 5) * Math.PI * 2;\r\n      const x = centerX + Math.cos(angle) * radius * 0.6;\r\n      const y = centerY + Math.sin(angle) * radius * 0.6;\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius * 0.25, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n\r\n    // Draw risk indicator if available\r\n    if (!loading && state?.risk_val != null) {\r\n      const riskRadius = radius * (1 + state.risk_val * 0.3);\r\n      ctx.strokeStyle = state.risk_val > 0.6 ? 'rgba(255, 100, 100, 0.4)' : 'rgba(100, 200, 100, 0.4)';\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, riskRadius, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n    }\r\n  }, [state, loading, tint]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 8 }}>\r\n      {label && <div style={{ fontSize: '12px', color: 'rgba(255,255,255,0.7)' }}>{label}</div>}\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={size}\r\n        height={size}\r\n        style={{\r\n          borderRadius: '50%',\r\n          boxShadow: '0 0 20px rgba(58, 209, 255, 0.2)',\r\n          display: 'block'\r\n        }}\r\n      />\r\n      <button\r\n        className=\"gaia-btn ghost\"\r\n        onClick={() => refresh()}\r\n        disabled={loading}\r\n        style={{ fontSize: '11px', padding: '4px 10px' }}\r\n      >\r\n        {loading ? 'Syncing...' : 'Refresh'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Filament.tsx"],"sourcesContent":["// components/Filament.tsx\r\n'use client';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\n// --- Supabase ---\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON!\r\n);\r\n\r\n// --- Types ---\r\ntype City = \"Global\" | \"Delhi\" | \"Mumbai\" | \"Darjeeling\";\r\n\r\nconst CITY_SENSITIVITY = {\r\n  Global: 0.35,     // very stable (barely wiggles)\r\n  Delhi: 1.35,      // strongest\r\n  Mumbai: 1.15,     // moderate\r\n  Darjeeling: 1.0,  // mild\r\n};\r\n\r\n// These affect only behaviour â€” NOT visuals.\r\nconst FILAMENT_PRESETS = {\r\n  Global: {\r\n    color: '#2de8a7',\r\n    vibration: 0.6,\r\n    complexity: 0.45,\r\n  },\r\n  Delhi: {\r\n    color: '#ff4b4b',\r\n    vibration: 1.35,\r\n    complexity: 1.25,\r\n  },\r\n  Mumbai: {\r\n    color: '#ff9f3f',\r\n    vibration: 1.1,\r\n    complexity: 1.05,\r\n  },\r\n  Darjeeling: {\r\n    color: '#4fd0ff',\r\n    vibration: 0.95,\r\n    complexity: 0.85,\r\n  }\r\n};\r\n\r\ninterface SymbioSphereData {\r\n  color?: string;\r\n  vibration?: number;   // live vibration\r\n  severity?: number;    // 0â€“1 range ideally\r\n}\r\n\r\ninterface GaiaLinkData {\r\n  variation: number; // delta temperature / variation feed\r\n  index?: number;    // symbiosis index city-specific\r\n}\r\n\r\ninterface FilamentProps {\r\n  city: City;\r\n  index?: number;         // Nexus now passes city index\r\n  symbioSignal?: any;     // optional override\r\n  tint?: string;          // optional color tint override\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// FILAMENT (UNCHANGED LOOK â€” IMPROVED INPUT LOGIC)\r\n// ---------------------------------------------------------------------------\r\n\r\nexport default function Filament({ city, index, symbioSignal, tint }: FilamentProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n  const [tick, setTick] = useState(0);\r\n\r\n  const [symbioData, setSymbioData] = useState<SymbioSphereData>({\r\n    vibration: 1,\r\n    severity: 0,\r\n    color: '#20e07a'\r\n  });\r\n\r\n  const [gaiaData, setGaiaData] = useState<GaiaLinkData>({\r\n    variation: 0.5,\r\n    index: index ?? 60\r\n  });\r\n\r\n  // -------------------------------------------------------------------------\r\n  // FETCH CITY-SPECIFIC DATA (SymbioSphere + GaiaLink)\r\n  // -------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [symbioRes, gaiaRes] = await Promise.all([\r\n          fetch(`/api/symbiosphere/city?city=${city}`),\r\n          fetch(`/api/gaialink/city?city=${city}`)\r\n        ]);\r\n        \r\n        if (symbioRes.ok) {\r\n          const s: SymbioSphereData = await symbioRes.json();\r\n          setSymbioData({\r\n            vibration: s.vibration ?? 1,\r\n            severity: s.severity ?? 0.3,\r\n            color: s.color ?? undefined,\r\n          });\r\n        }\r\n\r\n        if (gaiaRes.ok) {\r\n          const g: GaiaLinkData = await gaiaRes.json();\r\n          setGaiaData({\r\n            variation: g.variation ?? 0.5,\r\n            index: g.index ?? index ?? 60\r\n          });\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Filament city fetch error:', error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n// LIVE UPDATES\r\nconst symbioChannel = supabase\r\n  .channel(`symbiosphere_${city}`)\r\n  .on(\r\n    'postgres_changes',\r\n    {\r\n      event: '*',\r\n      schema: 'public',\r\n      table: 'city_symbiosphere',\r\n      filter: `city=eq.${city}`\r\n    } as any,\r\n    (payload: { new: SymbioSphereData }) => {\r\n      if (payload.new) {\r\n        setSymbioData({\r\n          vibration: payload.new.vibration,\r\n          severity: payload.new.severity,\r\n          color: payload.new.color\r\n        });\r\n      }\r\n    }\r\n  )\r\n  .subscribe();\r\n\r\nconst gaiaChannel = supabase\r\n  .channel(`gaialink_${city}`)\r\n  .on(\r\n    'postgres_changes',\r\n    {\r\n      event: '*',\r\n      schema: 'public',\r\n      table: 'city_gaialink',\r\n      filter: `city=eq.${city}`\r\n    } as any,\r\n    (payload: { new: GaiaLinkData }) => {\r\n      if (payload.new) {\r\n        setGaiaData({\r\n          variation: payload.new.variation,\r\n          index: payload.new.index\r\n        });\r\n      }\r\n    }\r\n  )\r\n  .subscribe();\r\n\r\nreturn () => {\r\n  supabase.removeChannel(symbioChannel);\r\n  supabase.removeChannel(gaiaChannel);\r\n};\r\n\r\n} , [city]);\r\n\r\n  // -------------------------------------------------------------------------\r\n  // DRAW LOOP â€” LOOK *UNCHANGED* â€” LOGIC UPGRADED\r\n  // -------------------------------------------------------------------------\r\n  useEffect(() => {\r\n    let raf = 0;\r\n\r\n    function draw() {\r\n      const canvas = canvasRef.current;\r\n      if (!canvas) return;\r\n      const ctx = canvas.getContext('2d')!;\r\n      const w = canvas.width, h = canvas.height;\r\n\r\n      ctx.clearRect(0, 0, w, h);\r\n\r\n      // --- SAME BACKGROUND ---\r\n      const g = ctx.createLinearGradient(0, 0, 0, h);\r\n      g.addColorStop(0, 'rgba(0, 0, 0, 1)');\r\n      g.addColorStop(1, 'rgba(141, 219, 237, 1)');\r\n      ctx.fillStyle = g;\r\n      ctx.fillRect(0, 0, w, h);\r\n\r\n      const preset = FILAMENT_PRESETS[city];\r\n\r\n      // ---------------------------------------------\r\n      // CITY-SENSITIVE BEHAVIOR INJECTED HERE\r\n      // ---------------------------------------------\r\n\r\n      const citySensitivity = CITY_SENSITIVITY[city];\r\n\r\n      const actualIndex = gaiaData.index ?? index ?? 60;\r\n\r\n      // vibration baseline\r\n      const baseVib = preset.vibration * (symbioSignal?.vibration ?? symbioData.vibration ?? 1);\r\n\r\n      // index behavior: worse index = stronger displacement\r\n      const indexFactor = (100 - actualIndex) / 100;\r\n\r\n      // final vibration (city-specific amplified)\r\n      const vibration =\r\n        baseVib *\r\n        (1 + indexFactor * 1.2) *\r\n        citySensitivity;\r\n\r\n      // flux depends on gaia variation + severity or provided flux\r\n      const severity = symbioSignal?.severity ?? symbioData.severity ?? 0.3;\r\n      const fluxMultiplier = symbioSignal?.flux ?? (1 + severity * 1.1);\r\n      const flux =\r\n        preset.complexity *\r\n        (gaiaData.variation ?? 0.5) *\r\n        fluxMultiplier;\r\n\r\n      const chaos = 0.4 + vibration * 1.35 + flux * 0.3;\r\n\r\n      const actualColor =\r\n        tint ??\r\n        symbioData.color ??\r\n        preset.color ??\r\n        '#2de8a7';\r\n\r\n      const hexPart = actualColor && actualColor.startsWith('#') ? actualColor.slice(1, 3) : '2d';\r\n      const hueValue = parseInt(hexPart, 16) * 360 / 255;\r\n      const hue = isNaN(hueValue) ? 120 : hueValue;\r\n\r\n      const cols = Math.round(16 + (1 / Math.max(1, chaos)) * 24);\r\n\r\n      // ---------------------------------------------\r\n      // EXACT SAME VISUALS â€” JUST VARIABLE INPUTS\r\n      // ---------------------------------------------\r\n      for (let i = 0; i < cols; i++) {\r\n        const baseX = (i + 0.5) / cols * w;\r\n        let x = baseX + 60 * Math.sin((tick + i * 20) / 60) * chaos * vibration;\r\n        let y = 20;\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, y);\r\n\r\n        const segments = 8;\r\n        for (let s = 0; s < segments; s++) {\r\n          const amp = Math.max(0.5, (1 - s / segments)) * chaos;\r\n          const cx = x + (Math.random() - 0.5) * 100 * amp + 30 * Math.sin((tick + i * 10 + s * 5) / 30);\r\n          const cy = y + (s + 1) * (h / (segments + 1)) + 15 * Math.cos((tick + i * 7 + s * 11) / 35);\r\n          const nx = baseX + (s + 1) * (w / (segments + 2) - w / (cols * segments)) + Math.sin((tick + s * i) / 25) * 80 * amp;\r\n\r\n          ctx.quadraticCurveTo(cx, cy, nx, cy + 10);\r\n          x = nx;\r\n          y = cy + 10;\r\n        }\r\n\r\n        const bright = 50 + 25 * Math.sin((tick + i) / 25);\r\n        ctx.lineWidth = 1.0 + 2.0 * indexFactor; // worse index = thicker lines\r\n\r\n        ctx.strokeStyle = `hsla(${hue + flux * 45}, 85%, ${bright}%, ${0.4 + (0.8 - chaos / 5)})`;\r\n        ctx.stroke();\r\n      }\r\n\r\n      // --- SAME PULSING CORE ---\r\n      const cx = w * 0.75, cy = h * 0.5;\r\n      const pulse = 25 + 40 * Math.abs(Math.sin(tick / 35));\r\n\r\n      const core = ctx.createRadialGradient(cx, cy, pulse * 0.05, cx, cy, pulse * 3.5);\r\n      core.addColorStop(0, `hsla(${hue}, 95%, 65%, 0.3)`);\r\n      core.addColorStop(0.5, `hsla(${hue}, 80%, 50%, 0.1)`);\r\n      core.addColorStop(1, 'rgba(10,12,18,0)');\r\n\r\n      ctx.fillStyle = core;\r\n      ctx.beginPath();\r\n      ctx.arc(cx, cy, pulse * 3.5, 0, Math.PI * 2);\r\n      ctx.fill();\r\n\r\n      setTick(t => t + 1);\r\n      raf = requestAnimationFrame(draw);\r\n    }\r\n\r\n    raf = requestAnimationFrame(draw);\r\n    return () => cancelAnimationFrame(raf);\r\n  }, [city, symbioData, gaiaData, index, symbioSignal, tint]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      width={800}\r\n      height={340}\r\n      style={{\r\n        borderRadius: 10,\r\n        display: 'block',\r\n        background: 'linear-gradient(180deg, rgba(255, 255, 255, 1), rgba(255, 255, 255, 1))'\r\n\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 732, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Nexus.tsx"],"sourcesContent":["'use client';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport useGaiaState from '@/lib/useGaiaState';\r\nimport EarthPreview from './EarthPreview';\r\nimport Filament from './Filament';\r\n\r\n/**\r\n * Nexus.tsx â€” city-scoped Nexus panel\r\n *\r\n * - activeCity: \"Global\" | \"Delhi\" | \"Mumbai\" | \"Darjeeling\"\r\n * - Reads symbio observations from localStorage ('gaia_obs') but restricts to allowed cities\r\n * - Uses CITY_SENSITIVITY to adjust index responsiveness per-city\r\n * - Determines tint/risk/index per-city (falling back to global GAIA state or passed result)\r\n * - Passes city-specific props to Filament (pattern, color, vibration, complexity)\r\n *\r\n * Note: If you have other places writing to localStorage('gaia_obs'), ensure they store objects\r\n * with { loc: \"Global\"|\"Delhi\"|\"Mumbai\"|\"Darjeeling\", type, level, note, vibration? } or use provided helper.\r\n */\r\n\r\nconst ALLOWED_LOCATIONS = ['Global', 'Delhi', 'Mumbai', 'Darjeeling'] as const;\r\ntype City = typeof ALLOWED_LOCATIONS[number];\r\n\r\nconst CITY_SENSITIVITY: Record<City, number> = {\r\n  Global: 0.45,      // stable\r\n  Delhi: 1.25,       // most reactive\r\n  Mumbai: 1.1,       // medium\r\n  Darjeeling: 0.95   // slightly reactive\r\n};\r\n\r\n// default fallback if GAIA global state doesn't contain city entries\r\nfunction clamp(v:number, a=0, b=100){ return Math.max(a, Math.min(b, v)); }\r\n\r\nexport default function Nexus({ result }: { result?: any }) {\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  const [activeCity, setActiveCity] = useState<City>('Global');\r\n  const [symbioSummary, setSymbioSummary] = useState<string>('');\r\n  const [symbioDetails, setSymbioDetails] = useState<string>('');\r\n  const [citySymbio, setCitySymbio] = useState<any[]>([]);\r\n\r\n  // Load and filter observations for the active city\r\n  useEffect(() => {\r\n    try {\r\n      const raw = JSON.parse(localStorage.getItem('gaia_obs') || '[]');\r\n      // keep only allowed locations, and group by loc\r\n      const filtered = Array.isArray(raw) ? raw.filter((o:any)=>{\r\n        return o && typeof o.loc === 'string' && ALLOWED_LOCATIONS.includes(o.loc);\r\n      }) : [];\r\n      setCitySymbio(filtered);\r\n    } catch (e) {\r\n      setCitySymbio([]);\r\n    }\r\n  }, []);\r\n\r\n  // When activeCity changes, compute summary & details from observations limited to this city\r\n  useEffect(() => {\r\n    try {\r\n      const raw = JSON.parse(localStorage.getItem('gaia_obs') || '[]');\r\n      const filtered = (Array.isArray(raw) ? raw : []).filter((o:any) => o && o.loc === activeCity);\r\n\r\n      if (filtered.length === 0) {\r\n        setSymbioSummary('');\r\n        setSymbioDetails('');\r\n        return;\r\n      }\r\n\r\n      const criticalCount = filtered.filter((o:any) => o.level === 'critical').length;\r\n      const concernCount = filtered.filter((o:any) => o.level === 'concern').length;\r\n      const goodCount = filtered.filter((o:any) => o.level === 'excellent' || o.level === 'good').length;\r\n      const categories = [...new Set(filtered.map((o:any) => o.type))];\r\n\r\n      const observationDetails = filtered.slice().reverse().map((o:any) => {\r\n        return `${o.type} (${o.level}) â€” ${o.note || 'no note'}`;\r\n      }).join(' | ');\r\n\r\n      const summary = `${filtered.length} observations for ${activeCity}: ${goodCount} positive, ${concernCount} concerns, ${criticalCount} critical. Categories: ${categories.join(', ')}`;\r\n      setSymbioSummary(summary);\r\n      setSymbioDetails(observationDetails);\r\n    } catch (e) {\r\n      setSymbioSummary('');\r\n      setSymbioDetails('');\r\n    }\r\n  }, [activeCity]);\r\n\r\n  // helper: get the latest numeric symbiosis index for the city from GAIA state if present\r\n  function getCityIndexFromState(city:City) {\r\n    // Expected optional shape: state.city_gaia = { Global: { index,...}, Delhi: {...}, ... }\r\n    if (!state || loading) return undefined;\r\n    try {\r\n      const cityData = (state.city_gaia && state.city_gaia[city]) ?? null;\r\n      if (cityData && typeof cityData.index === 'number') return cityData.index;\r\n      // fallback to global gaia_link merged state (if it contains city entries)\r\n      if (state.gaia_link && typeof state.gaia_link.index === 'number') return state.gaia_link.index;\r\n    } catch {}\r\n    return undefined;\r\n  }\r\n\r\n  // compute the active index using priority: city-specific GAIA state -> local result prop -> default 50\r\n  const baseIndex = useMemo(() => {\r\n    const stateIndex = getCityIndexFromState(activeCity);\r\n    if (typeof stateIndex === 'number') return clamp(stateIndex);\r\n    if (result && typeof result.index === 'number') return clamp(result.index);\r\n    if (state && state.gaia_link && typeof state.gaia_link.index === 'number') return clamp(state.gaia_link.index);\r\n    return 50;\r\n  }, [activeCity, state, loading, result]);\r\n\r\n  const sensitivity = CITY_SENSITIVITY[activeCity];\r\n  // Sensitivity is applied softly: weightedAverage(baseIndex, baseIndex*sensitivity, factor)\r\n  // We only lightly nudge the index to avoid wild jumps; global is more inert.\r\n  const idx = useMemo(() => {\r\n    // Apply soft sensitivity multiplier but dampen by factor to avoid explosions\r\n    const damp = activeCity === 'Global' ? 0.35 : 0.85; // global much more damped\r\n    const adjusted = baseIndex * (1 + (sensitivity - 1) * damp);\r\n    return clamp(Math.round(adjusted * 100)/100, 0, 100);\r\n  }, [baseIndex, activeCity]);\r\n\r\n  // The threat/recovery bar values (0-100)\r\n  const threat = Math.max(0, 100 - idx);\r\n  const recovery = idx;\r\n\r\n  // compute tint color by index (red/orange/green), but also allow GAIA's provided tint as possible overlay\r\n  function getTintForIndex(index?: number, gaiaTint?: string) {\r\n    const i = typeof index === 'number' ? index : 50;\r\n    if (i < 40) return 'rgba(255,70,70,0.32)';      // red\r\n    if (i < 70) return 'rgba(255,165,60,0.30)';     // orange\r\n    return 'rgba(45,232,167,0.28)';                 // green\r\n  }\r\n\r\n  const gaiaRisk = !loading && state?.risk != null ? state.risk : undefined;\r\n  // allow state-provided tint but we override with index range for predictability\r\n  const gaiaTint = getTintForIndex(idx, state?.earth_tint);\r\n\r\n  // Prepare Filament \"symbio signal\" based on observations for the activeCity\r\n  const symbioForCity = useMemo(() => {\r\n    try {\r\n      const raw = JSON.parse(localStorage.getItem('gaia_obs') || '[]');\r\n      return (Array.isArray(raw) ? raw : []).filter((o:any) => o && o.loc === activeCity);\r\n    } catch {\r\n      return [];\r\n    }\r\n  }, [activeCity]);\r\n\r\n  // derive symbio signal: vibration average, flux/severity score etc.\r\n  const symbioSignal = useMemo(() => {\r\n    if (!Array.isArray(symbioForCity) || symbioForCity.length === 0) {\r\n      return { vibration: 0.5, flux: 0.2, severity: 0 };\r\n    }\r\n    const severityScore = symbioForCity.reduce((acc:any, o:any) => {\r\n      const lvl = o.level === 'critical' ? 3 : o.level === 'concern' ? 2 : 1;\r\n      return acc + lvl;\r\n    }, 0) / (symbioForCity.length * 3);\r\n    // vibration stronger if more criticals + sensitivity\r\n    const vibration = clamp(0.4 + severityScore * 1.8 * CITY_SENSITIVITY[activeCity], 0.1, 2.5);\r\n    const flux = clamp(0.1 + severityScore * 1.5, 0, 2);\r\n    return { vibration, flux, severity: severityScore };\r\n  }, [symbioForCity, activeCity]);\r\n\r\n  // Helper to return interpretation text scoped to city\r\n  function buildInterpretation() {\r\n    const lines: string[] = [];\r\n    lines.push(`Nexus Analysis for ${activeCity}`);\r\n    lines.push(`The filaments visualize the dynamic web of symbiotic connections and energy flows within the planetary ecosystem. Their patterns, colors, and movements reflect real-time data from SymbioSphere observations and GaiaLink environmental metrics, indicating the health and stress levels of human-environment interactions.`);\r\n    lines.push(`Symbiosis Summary: The symbiosis index measures the balance between human activities and planetary health. At ${idx.toFixed(1)}/100, the system is ${idx > 65 ? 'stable and harmonious' : idx > 40 ? 'tense with moderate stress' : 'highly stressed and imbalanced'}. This reflects the overall resilience and recovery potential of ${activeCity}'s ecosystem.`);\r\n    if (state?.symbio_analysis?.summary) lines.push(`Latest SymbioSphere Report Summary: ${state.symbio_analysis.summary}`);\r\n    lines.push(`Key Metrics:`);\r\n    lines.push(`- Symbiosis Index: ${idx.toFixed(1)}/100 (${idx > 65 ? 'Stable' : idx > 40 ? 'Tense' : 'Stressed'})`);\r\n    lines.push(`- Threat Level: ${threat.toFixed(0)}% | Recovery Potential: ${recovery.toFixed(0)}%`);\r\n    if (symbioSummary) lines.push(`Observations: ${symbioSummary}`);\r\n    if (symbioDetails) lines.push(`Latest Details: ${symbioDetails}`);\r\n    if (state?.mood) lines.push(`GAIA Mood: ${state.mood}`);\r\n    if (state?.symbio_analysis?.recommended_interventions && state.symbio_analysis.recommended_interventions.length > 0) {\r\n      lines.push(`SymbioSphere Recommended Interventions: ${state.symbio_analysis.recommended_interventions.join(', ')}`);\r\n    }\r\n    // add recommended action short hint (simple heuristic)\r\n    lines.push(`Recommendations:`);\r\n    if (idx < 40) {\r\n      lines.push('- Urgent local mitigation: Implement immediate emissions cuts, emergency pollution controls, and temporary shutdowns of major pollution sources.');\r\n    } else if (idx < 70) {\r\n      lines.push('- Accelerate sustainable practices: Expand renewables, conduct targeted reforestation, and enforce stricter pollution regulations.');\r\n    } else {\r\n      lines.push('- Maintain and enhance: Focus on building resilience, supporting biodiversity, and monitoring long-term sustainability.');\r\n    }\r\n    return lines.join('\\n\\n');\r\n  }\r\n\r\n  const interpretationText = useMemo(() => buildInterpretation(), [idx, threat, recovery, symbioSummary, symbioDetails, state?.mood, activeCity]);\r\n\r\n  // small helper: ensure observation saved only if location allowed (callable by other modules)\r\n  function saveObservationRestricted(obs: any) {\r\n    if (!obs || !obs.loc || typeof obs.loc !== 'string') throw new Error('Invalid observation shape');\r\n    if (!ALLOWED_LOCATIONS.includes(obs.loc)) throw new Error('Observation location not allowed. Allowed: Global, Delhi, Mumbai, Darjeeling');\r\n    const raw = JSON.parse(localStorage.getItem('gaia_obs') || '[]');\r\n    raw.push(obs);\r\n    localStorage.setItem('gaia_obs', JSON.stringify(raw));\r\n  }\r\n\r\n  return (\r\n    <div style={{display:'flex',flexDirection:'column',gap:12}}>\r\n      {/* City Tabs (now includes Global) */}\r\n      <div style={{display:'flex', gap:8, marginBottom:8}}>\r\n        {ALLOWED_LOCATIONS.map((loc) => (\r\n          <div key={loc} className={`subtab ${activeCity === loc ? 'active' : ''}`} onClick={() => setActiveCity(loc as City)}>{loc}</div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Top Section */}\r\n      <div style={{display:'flex',gap:12,alignItems:'flex-start'}}>\r\n        <div style={{flex:1}}>\r\n          {/* Filament receives city, index, symbioSignal & city-specific tint */}\r\n          <Filament\r\n            city={activeCity}\r\n            index={idx}\r\n            tint={gaiaTint}\r\n            symbioSignal={symbioSignal}\r\n          />\r\n\r\n          {/* Threat vs Recovery Bar */}\r\n          <div style={{marginTop:12, background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10}}>\r\n            <div style={{display:'flex', justifyContent:'space-between', marginBottom:6}}>\r\n              <div className=\"muted-block\">Threat vs Recovery ({activeCity})</div>\r\n              <div className=\"pill\" style={{fontSize:11}}>{threat.toFixed(0)} / {recovery.toFixed(0)}</div>\r\n            </div>\r\n\r\n            <div style={{display:'flex', height:24, gap:2, borderRadius:6, overflow:'hidden', background:'rgba(0,0,0,0.2)'}}>\r\n              <div style={{\r\n                flex: threat,\r\n                background: threat > 50 ? 'linear-gradient(90deg, #ff4444, #ff6b6b)' : threat > 25 ? 'linear-gradient(90deg, #ffa500, #ffb84d)' : 'linear-gradient(90deg, #ff9999, #ffcccc)',\r\n                transition: 'all 0.3s ease',\r\n                borderRadius: threat > 0 ? '6px 0 0 6px' : 0,\r\n                display:'flex', alignItems:'center', justifyContent:'center',\r\n                fontSize:10,\r\n                color:'rgba(255,255,255,0.7)',\r\n                fontWeight:600\r\n              }}>\r\n                {threat > 10 && `${threat.toFixed(0)}%`}\r\n              </div>\r\n\r\n              <div style={{\r\n                flex: recovery,\r\n                background: recovery > 70 ? 'linear-gradient(90deg, #2de8a7, #20e07a)' : recovery > 40 ? 'linear-gradient(90deg, #56c8ff, #3ad1ff)' : 'linear-gradient(90deg, #ff9f6b, #ffc46a)',\r\n                transition: 'all 0.3s ease',\r\n                borderRadius: recovery > 0 ? '0 6px 6px 0' : 0,\r\n                display:'flex', alignItems:'center', justifyContent:'center',\r\n                fontSize:10,\r\n                color:'rgba(255,255,255,0.9)',\r\n                fontWeight:600\r\n              }}>\r\n                {recovery > 10 && `${recovery.toFixed(0)}%`}\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{display:'flex', justifyContent:'space-between', marginTop:4, fontSize:11}}>\r\n              <span className=\"muted\">Stress</span>\r\n              <span className=\"muted\">Stability</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right column */}\r\n        <div style={{width:300}}>\r\n          {/* Earth Preview â€” pass color/tint and city label */}\r\n          <div style={{background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10, textAlign:'center', marginBottom:12}}>\r\n            <div className=\"muted-block\">Earth State â€” {activeCity}</div>\r\n            <div style={{marginTop:8, display:'flex', justifyContent:'center'}}>\r\n              <EarthPreview size={140} tint={gaiaTint} label={activeCity} />\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{background:'rgba(255,255,255,0.02)', padding:10, borderRadius:10}}>\r\n            <div style={{display:'flex',alignItems:'center',gap:10}}>\r\n              <div className=\"pill\" id=\"nexusMoodTag\">\r\n                {state && !loading ? (\r\n                  state.mood || (idx > 65 ? 'Harmonic' : idx > 40 ? 'Tense' : 'Stressed')\r\n                ) : (\r\n                  result ? (result.index > 65 ? 'Harmonic' : result.index > 40 ? 'Tense' : 'Stressed') : 'â€”'\r\n                )}\r\n              </div>\r\n              <div style={{flex:1}}>\r\n                <div className=\"muted-block\">Symbiosis index</div>\r\n                <div id=\"nexusIndex\" style={{fontWeight:700,fontSize:22}}>\r\n                  {idx.toFixed(0)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{display:'flex', gap:8, marginTop:8, alignItems:'center'}}>\r\n              <div className=\"muted-block\">Risk</div>\r\n              <div className=\"pill\" style={{fontSize:12}}>\r\n                {gaiaRisk ? (gaiaRisk * 100).toFixed(0) + '%' : (result?.risk ?? 'â€”')}\r\n              </div>\r\n\r\n              <div style={{marginLeft:'auto', display:'flex', alignItems:'center', gap:8}}>\r\n                <div className=\"muted-block\">Tint</div>\r\n                <div style={{width:22,height:22,borderRadius:6,background:gaiaTint,border:'1px solid rgba(255,255,255,0.06)'}} />\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{marginTop:8}}>\r\n              <div className=\"muted-block\">Timeline</div>\r\n              <input id=\"timeSlider\" type=\"range\" min={0} max={100} defaultValue={100} />\r\n              <div style={{display:'flex', gap:8, marginTop:8}}>\r\n                <button className=\"gaia-btn primary\" id=\"recompute\" onClick={() => { /* noop for now â€” can trigger refresh or recompute */ alert('Recompute triggered'); }}>Recompute Visuals</button>\r\n                <button className=\"gaia-btn ghost\" onClick={() => refresh()} disabled={loading}>{loading ? 'Syncing...' : 'Sync GAIA State'}</button>\r\n                <button className=\"gaia-btn ghost\" id=\"exportPNG\" onClick={()=>{ alert('Export PNG not available'); }}>Export PNG</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Full width interpretation */}\r\n      <div style={{background:'rgba(255,255,255,0.02)', padding:12, borderRadius:10}}>\r\n        <div className=\"muted-block\">Interpretation</div>\r\n        <div id=\"nexusText\" style={{marginTop:8, fontSize:13, lineHeight:1.6, whiteSpace:'pre-line'}}>\r\n          {interpretationText}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1465, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/PreviewCanvas.tsx"],"sourcesContent":["// components/PreviewCanvas.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nexport default function PreviewCanvas({ index }: { index?: number }){\r\n  const ref = useRef<HTMLCanvasElement|null>(null);\r\n  useEffect(()=>{\r\n    const c = ref.current; if(!c) return;\r\n    const ctx = c.getContext('2d')!;\r\n    function draw(){\r\n      const w = c.width, h = c.height; ctx.clearRect(0,0,w,h);\r\n      const idx = (typeof index === 'number') ? index : (JSON.parse(localStorage.getItem('gaia_result') || 'null')?.index || 50);\r\n      const g = ctx.createLinearGradient(0,0,w,0);\r\n      g.addColorStop(0,'rgba(255,255,255,0.02)'); g.addColorStop(1,'rgba(255,255,255,0.01)');\r\n      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);\r\n      const threat = 100 - idx;\r\n      ctx.fillStyle = 'rgba(255,80,80,0.18)'; ctx.fillRect(10,20,(threat/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(30,200,110,0.18)'; ctx.fillRect(10,20,((idx)/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(255,255,255,0.9)'; ctx.font='12px sans-serif';\r\n      \r\n    }\r\n    draw();\r\n    const t = setInterval(draw, 800);\r\n    return ()=>clearInterval(t);\r\n  },[index]);\r\n  return <canvas id=\"previewCanvas\" ref={ref} width={0} height={0} style={{marginTop:12,borderRadius:10, background:'transparent'}}/>;\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAE/B;AADA;;;AAGe,SAAS,cAAc,EAAE,KAAK,EAAsB;IACjE,MAAM,MAAM,IAAA,+MAAM,EAAyB;IAC3C,IAAA,kNAAS,EAAC;QACR,MAAM,IAAI,IAAI,OAAO;QAAE,IAAG,CAAC,GAAG;QAC9B,MAAM,MAAM,EAAE,UAAU,CAAC;QACzB,SAAS;YACP,MAAM,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM;YAAE,IAAI,SAAS,CAAC,GAAE,GAAE,GAAE;YACrD,MAAM,MAAM,AAAC,OAAO,UAAU,WAAY,QAAS,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,kBAAkB,SAAS,SAAS;YACvH,MAAM,IAAI,IAAI,oBAAoB,CAAC,GAAE,GAAE,GAAE;YACzC,EAAE,YAAY,CAAC,GAAE;YAA2B,EAAE,YAAY,CAAC,GAAE;YAC7D,IAAI,SAAS,GAAG;YAAG,IAAI,QAAQ,CAAC,GAAE,GAAE,GAAE;YACtC,MAAM,SAAS,MAAM;YACrB,IAAI,SAAS,GAAG;YAAwB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAC,SAAO,MAAK,CAAC,IAAE,EAAE,GAAE;YAC/E,IAAI,SAAS,GAAG;YAAyB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAE,MAAK,MAAK,CAAC,IAAE,EAAE,GAAE;YAC/E,IAAI,SAAS,GAAG;YAAyB,IAAI,IAAI,GAAC;QAEpD;QACA;QACA,MAAM,IAAI,YAAY,MAAM;QAC5B,OAAO,IAAI,cAAc;IAC3B,GAAE;QAAC;KAAM;IACT,qBAAO,8OAAC;QAAO,IAAG;QAAgB,KAAK;QAAK,OAAO;QAAG,QAAQ;QAAG,OAAO;YAAC,WAAU;YAAG,cAAa;YAAI,YAAW;QAAa;;;;;;AACjI","debugId":null}},
    {"offset": {"line": 1524, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/HelpTooltip.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from 'react';\r\n\r\nexport default function HelpTooltip({ title, children }:{ title?:string; children:React.ReactNode }){\r\n  const [open, setOpen] = useState(false);\r\n  return (\r\n    <span style={{display:'inline-block'}}>\r\n      <span onMouseEnter={() => setOpen(true)} onMouseLeave={() => setOpen(false)} style={{border:'none',background:'transparent',color:'var(--muted)',cursor:'help',padding:4, display:'inline-block'}}>â„¹ï¸</span>\r\n      {open ? (\r\n        <div style={{position:'absolute', zIndex:9999, maxWidth:320, background:'var(--panel)', color:'var(--ink)', border:'1px solid rgba(255,255,255,0.04)', padding:12, borderRadius:8}}>\r\n          <strong style={{display:'block', marginBottom:6}}>{title || 'Help'}</strong>\r\n          <div style={{fontSize:13, color:'var(--muted)'}}>{children}</div>\r\n        </div>\r\n      ) : null}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAA8C;IACjG,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,qBACE,8OAAC;QAAK,OAAO;YAAC,SAAQ;QAAc;;0BAClC,8OAAC;gBAAK,cAAc,IAAM,QAAQ;gBAAO,cAAc,IAAM,QAAQ;gBAAQ,OAAO;oBAAC,QAAO;oBAAO,YAAW;oBAAc,OAAM;oBAAe,QAAO;oBAAO,SAAQ;oBAAG,SAAQ;gBAAc;0BAAG;;;;;;YAClM,qBACC,8OAAC;gBAAI,OAAO;oBAAC,UAAS;oBAAY,QAAO;oBAAM,UAAS;oBAAK,YAAW;oBAAgB,OAAM;oBAAc,QAAO;oBAAoC,SAAQ;oBAAI,cAAa;gBAAC;;kCAC/K,8OAAC;wBAAO,OAAO;4BAAC,SAAQ;4BAAS,cAAa;wBAAC;kCAAI,SAAS;;;;;;kCAC5D,8OAAC;wBAAI,OAAO;4BAAC,UAAS;4BAAI,OAAM;wBAAc;kCAAI;;;;;;;;;;;uBAElD;;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 1608, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaSimulation.ts"],"sourcesContent":["// lib/useGaiaSimulation.ts\r\n'use client';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL || '',\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\r\n);\r\n\r\nexport default function useGaiaSimulation() {\r\n  const [inputs, setInputs] = useState<any>({\r\n    co2: 40,\r\n    def: 20,\r\n    ren: 55,\r\n    pol: 35,\r\n    pop: 20,\r\n    airweaver: false,\r\n    airweaver_int: 40,\r\n    algae: false,\r\n    algae_int: 30,\r\n    cryo: false,\r\n    cryo_int: 20,\r\n    biosynth: false,\r\n    biosynth_int: 10,\r\n    reforest: false,\r\n    reforest_int: 30,\r\n    ccapture: false,\r\n    ccapture_int: 25,\r\n    transport: false,\r\n    transport_int: 40,\r\n    urbangreen: false,\r\n    urbangreen_int: 30\r\n  });\r\n  const [method, setMethod] = useState<'manual'|'preset'|'mc'|'ai'>('manual');\r\n  const [result, setResult] = useState<any>(null);\r\n\r\n  const clamp = (v:number, min:number, max:number) => Math.max(min, Math.min(max, v));\r\n\r\n  // city modifiers map\r\n  const CITY_MODIFIERS: Record<string, { pollutionSensitivity: number, tempMultiplier?: number }> = {\r\n    Global: { pollutionSensitivity: 1.0, tempMultiplier: 1.0 },\r\n    Delhi: { pollutionSensitivity: 1.25, tempMultiplier: 1.08 },\r\n    Mumbai: { pollutionSensitivity: 1.10, tempMultiplier: 1.04 },\r\n    Darjeeling: { pollutionSensitivity: 0.85, tempMultiplier: 0.95 }\r\n  };\r\n\r\n  // core compute but accepts a location string to apply modifiers\r\n  const computeWithCity = useCallback((vals:any, location = 'Global') => {\r\n    const co2 = clamp(vals.co2,0,100);\r\n    const def = clamp(vals.def,0,100);\r\n    const pop = clamp(vals.pop,-20,80);\r\n    const ren = clamp(vals.ren,0,100);\r\n    const pol = clamp(vals.pol,0,100);\r\n\r\n    const interventions = {\r\n      airweaver: vals.airweaver ? clamp(vals.airweaver_int,0,100):0,\r\n      algae: vals.algae ? clamp(vals.algae_int,0,100):0,\r\n      cryo: vals.cryo ? clamp(vals.cryo_int,0,100):0,\r\n      biosynth: vals.biosynth ? clamp(vals.biosynth_int,0,100):0,\r\n      reforest: vals.reforest ? clamp(vals.reforest_int,0,100):0,\r\n      ccapture: vals.ccapture ? clamp(vals.ccapture_int,0,100):0,\r\n      transport: vals.transport ? clamp(vals.transport_int,0,100):0,\r\n      urbangreen: vals.urbangreen ? clamp(vals.urbangreen_int,0,100):0\r\n    };\r\n\r\n    const mod = CITY_MODIFIERS[location] || CITY_MODIFIERS.Global;\r\n    const pollSens = mod.pollutionSensitivity || 1.0;\r\n\r\n    // apply modifiers when computing penalties\r\n    const p_co2 = co2 * 0.32 * pollSens;\r\n    const p_def = def * 0.22 * pollSens;\r\n    const p_pop = (pop>0?pop:0) * 0.10;\r\n    const base_positive = ren * 0.28 + pol * 0.18;\r\n\r\n    function eff(x:number, weight:number){\r\n      return weight * (0.2 + 0.8 * Math.tanh(x/120 * 2.5));\r\n    }\r\n    const iv = interventions;\r\n    const interventionScore =\r\n      eff(iv.airweaver, 18) + eff(iv.algae, 12) + eff(iv.cryo, 10) +\r\n      eff(iv.biosynth, 10) + eff(iv.reforest, 24) + eff(iv.ccapture, 16) +\r\n      eff(iv.transport, 20) + eff(iv.urbangreen, 12);\r\n\r\n    let raw = 50\r\n      + (base_positive * 0.24)\r\n      + (interventionScore * 0.5)\r\n      - (p_co2 * 0.35)\r\n      - (p_def * 0.28)\r\n      - (p_pop * 0.4);\r\n\r\n    if(co2 > 80) raw -= (co2-80)*0.35 * pollSens;\r\n    if(def > 70) raw -= (def-70)*0.25 * pollSens;\r\n\r\n    const index = Math.round(clamp(raw, 0, 100));\r\n    // apply temp multiplier slightly affected by the city modifier\r\n    const tempDrift = Number(((co2/100)*2.5 * (mod.tempMultiplier || 1.0) - (interventionScore/200)).toFixed(2));\r\n    const biodiversity = Math.round(50 + (index-50)*0.6);\r\n    const seaLevel = Number(((def/100)*0.15 + (co2/100)*0.1 - (iv.reforest? iv.reforest/100*0.02 : 0)).toFixed(3));\r\n\r\n    return { index, tempDrift, biodiversity, seaLevel, interventionsApplied: interventions, city: location };\r\n  }, []);\r\n\r\n  // existing simulate wrapper uses computeWithCity('Global') by default previously â€” keep a local simulate that still computes locally,\r\n  // but note runSimulation in GaiaLink will call server endpoints which also get `city`.\r\n  const simulate = useCallback(() => {\r\n    const r = computeWithCity(inputs, 'Global');\r\n    setResult(r);\r\n    localStorage.setItem('gaia_result', JSON.stringify(r));\r\n    return r;\r\n  }, [inputs, computeWithCity]);\r\n\r\n  const applyAISuggestion = useCallback(() => {\r\n    setInputs(prev => {\r\n      const base = {...prev};\r\n      if(base.co2 > 55){\r\n        base.ren = clamp(base.ren + 25,0,100);\r\n        base.ccapture = true; base.ccapture_int = 60;\r\n        base.reforest = true; base.reforest_int = 45;\r\n        base.transport = true; base.transport_int = 50;\r\n      } else if(base.def > 50){\r\n        base.reforest = true; base.reforest_int = 70;\r\n        base.urbangreen = true; base.urbangreen_int = 40;\r\n      } else {\r\n        base.pol = clamp(base.pol + 20,0,100);\r\n        base.urbangreen = true; base.urbangreen_int = 35;\r\n      }\r\n      return base;\r\n    });\r\n  }, []);\r\n\r\n  const runMonteCarlo = useCallback((runs = 40) => {\r\n    const results:number[] = [];\r\n    for(let i=0;i<runs;i++){\r\n      const base = JSON.parse(JSON.stringify(inputs));\r\n      ['co2','def','ren','pol','pop'].forEach((k:any)=> {\r\n        const jitter = (Math.random()*0.5 - 0.25);\r\n        base[k] = clamp(Math.round(base[k] * (1 + jitter)), -20, 100);\r\n      });\r\n      ['airweaver','algae','cryo','biosynth','reforest','ccapture','transport','urbangreen'].forEach((k:any)=>{\r\n        if(base[k]) base[k+'_int'] = clamp(Math.round(base[k+'_int'] * (0.6 + Math.random()*0.9)), 0, 100);\r\n        else if(Math.random() < 0.08) { base[k+'_int'] = Math.round(Math.random()*60); base[k]=true; }\r\n      });\r\n      // run Monte Carlo using Global local compute for distribution; caller can specify city-run if desired.\r\n      const r = computeWithCity(base, 'Global');\r\n      results.push(r.index);\r\n    }\r\n    const avg = Math.round(results.reduce((a,b)=>a+b,0)/results.length);\r\n    const baseComputed = computeWithCity(inputs, 'Global');\r\n    baseComputed.index = avg;\r\n    setResult(baseComputed);\r\n    localStorage.setItem('gaia_result', JSON.stringify(baseComputed));\r\n    return baseComputed;\r\n  }, [inputs, computeWithCity]);\r\n\r\n  useEffect(()=> {\r\n    const raw = localStorage.getItem('gaia_result');\r\n    if(raw) setResult(JSON.parse(raw));\r\n  }, []);\r\n\r\n  // saveScenario now accepts optional location and persists to Supabase with `location` column\r\n  const saveScenario = useCallback(async (name:string, location?: string) => {\r\n    const s = JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n    const payload = { name, vals: inputs, created: Date.now(), location: location || 'Global' };\r\n    s.push(payload);\r\n    localStorage.setItem('gaia_scenarios', JSON.stringify(s));\r\n\r\n    // attempt remote save\r\n    try {\r\n      const prepared = {\r\n        name,\r\n        inputs_json: inputs,\r\n        result_json: result || computeWithCity(inputs, location || 'Global'),\r\n        ai_analysis: null,\r\n        location: location || 'Global',\r\n        created_at: new Date().toISOString()\r\n      };\r\n      const { error } = await supabase\r\n        .from('scenarios')\r\n        .insert([prepared]);\r\n\r\n      if (error) {\r\n        console.warn('Supabase insert (saveScenario) returned error:', error);\r\n        throw error;\r\n      }\r\n      return true;\r\n    } catch (err) {\r\n      console.error('saveScenario remote failed:', err);\r\n      console.error('Error details:', JSON.stringify(err, null, 2));\r\n      throw err;\r\n    }\r\n  }, [inputs, result, computeWithCity]);\r\n\r\n  const loadScenarioList = useCallback(()=> {\r\n    return JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n  }, []);\r\n\r\n  return {\r\n    inputs, setInputs, method, setMethod, result,\r\n    simulate, applyAISuggestion, runMonteCarlo, saveScenario, loadScenarioList,\r\n    setResult, computeWithCity\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1857, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/NexusPage.tsx"],"sourcesContent":["// components/NexusPage.tsx\r\n\r\n\"use client\";\r\nimport React from \"react\";\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Chatbot from \"@/components/Chatbot\";\r\nimport Nexus from './Nexus';\r\nimport PreviewCanvas from './PreviewCanvas';\r\nimport HelpTooltip from './HelpTooltip';\r\nimport useGaiaSimulation from '../lib/useGaiaSimulation';\r\nimport useGaiaState from '../lib/useGaiaState';\r\n\r\n\r\n  function hexToRgba(hex: string, alpha = 0.18) {\r\n    if (!hex) return `rgba(255,100,0,${alpha})`;\r\n    let h = hex.replace('#', '');\r\n    if (h.length === 3) h = h.split('').map((c) => c + c).join('');\r\n    const num = parseInt(h, 16);\r\n    const r = (num >> 16) & 255;\r\n    const g = (num >> 8) & 255;\r\n    const b = num & 255;\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  }\r\n\r\n\r\nexport default function NexusPage() {\r\n  const { result } = useGaiaSimulation();\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"wrap\">\r\n        <div className=\"card\" style={{ marginBottom: 20, background: 'var(--glass)', borderColor: 'var(--accent)' }}>\r\n          <h4 style={{ marginTop: 0, color: 'var(--accent)' }}>â„¹ï¸ Nexus Overview</h4>\r\n          <ul style={{ margin: 0, paddingLeft: 20, color: 'var(--muted)' }}>\r\n            <li><strong>Nexus:</strong> Analyze simulation results from GAIA Link and SymbioSphere in a unified dashboard.</li>\r\n            <li><strong>Scenario Breakdown:</strong> View detailed impacts on temperature, biodiversity, sea levels, and intervention effectiveness.</li>\r\n            <li><strong>Visualizations:</strong> Interactive charts and graphs show trends and projections over time.</li>\r\n            <li><strong>Decision Support:</strong> Use data to evaluate the success of different climate strategies.</li>\r\n            <li><strong>Global State:</strong> Reflects real-time changes from other modules for comprehensive insights.</li>\r\n          </ul>\r\n        </div>\r\n\r\n                    <div style={{marginTop:18}}>\r\n                <Nexus result={result} />\r\n              </div>\r\n        <section>\r\n          <aside className=\"card\" style={{display:'flex', flexDirection:'column'}}>\r\n            <h3 style={{marginTop:0}}>Visual Preview â€” \"Future Earth\"</h3>\r\n            <div className=\"muted\">High-resolution satellite imagery with predictive climate overlay</div>\r\n            <div style={{display:'flex', flexDirection:'column', gap:10, alignItems:'center', marginTop:10}}>\r\n              <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                <img id=\"earthBase\" src=\"https://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57730/land_ocean_ice_2048.jpg\" alt=\"Earth current state\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)', objectFit:'cover',display:'block'}} />\r\n                <div className=\"pill\" style={{position:'absolute', left:8, top:8}}>Current State</div>\r\n              </div>\r\n              <div style={{position:'relative', width:'100%', maxWidth:800}}>\r\n                <img id=\"earthPred\" src=\"https://upload.wikimedia.org/wikipedia/commons/9/97/The_Earth_seen_from_Apollo_17.jpg\" alt=\"Projected Earth state\" style={{width:'100%',borderRadius:12,border:'1px solid rgba(255,255,255,0.1)',objectFit:'cover',display:'block'}} />\r\n                <div id=\"predTag\" className=\"pill\" style={{position:'absolute', right:8, top:8}}>{state?.gaia_link?.delta_temp ? `Projected +${state.gaia_link.delta_temp}Â°C` : 'Projected +2Â°C'}</div>\r\n                <div id=\"predTint\" style={{position:'absolute', inset:0, pointerEvents:'none', borderRadius:12, background: state?.earth_tint ? hexToRgba(state.earth_tint, 0.18) : 'rgba(255, 100, 0, 0.15)'}} />\r\n              </div>\r\n              <div style={{width:'100%', maxWidth:800, display:'flex', justifyContent:'flex-end'}}>\r\n                <button className=\"gaia-btn\" onClick={() => refresh()} disabled={loading} style={{marginTop:8}}>{loading ? 'Refreshingâ€¦' : 'Refresh GAIA State'} <HelpTooltip title=\"Refresh GAIA State\">Updates the global state with the latest simulation results from other modules.</HelpTooltip></button>\r\n              </div>\r\n            </div>\r\n\r\n            <PreviewCanvas index={result?.index} />\r\n          </aside>\r\n\r\n        </section>\r\n      </main>\r\n\r\n      <Chatbot />\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}