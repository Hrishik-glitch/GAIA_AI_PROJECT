{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function Navbar() {\r\n  const path = usePathname();\r\n\r\n  const tab = (href: string, label: string) => (\r\n    <Link\r\n      href={href}\r\n      className={`gaia-btn pill ${path === href ? \"primary\" : \"ghost\"}`}\r\n\r\n    >\r\n      {label}\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"brand\">\r\n        <div className=\"logo\" />\r\n        <div>\r\n          <h1>GAIA Link — Demo</h1>\r\n          <div className=\"muted\">Simulation Hub · SymbioSphere · Nexus</div>\r\n        </div>\r\n      </div>\r\n      <nav>\r\n        {tab(\"/gaia-link\", \"GAIA Link\")}\r\n        {tab(\"/symbiosphere\", \"SymbioSphere\")}\r\n        {tab(\"/nexus\", \"Nexus\")}\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,OAAO,IAAA,iJAAW;IAExB,MAAM,MAAM,CAAC,MAAc,sBACzB,8OAAC,uKAAI;YACH,MAAM;YACN,WAAW,CAAC,cAAc,EAAE,SAAS,OAAO,YAAY,SAAS;sBAGhE;;;;;;IAIL,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;;0CACC,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAI,WAAU;0CAAQ;;;;;;;;;;;;;;;;;;0BAG3B,8OAAC;;oBACE,IAAI,cAAc;oBAClB,IAAI,iBAAiB;oBACrB,IAAI,UAAU;;;;;;;;;;;;;AAIvB","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Chatbot.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function Chatbot() {\r\n  const [open, setOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  async function send(msg: string) {\r\n    const res = await fetch(\"/api/chat\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        messages: [\r\n          { role: \"system\", content: \"You are GAIA.\" },\r\n          { role: \"user\", content: msg }\r\n        ]\r\n      }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    return data.reply;\r\n  }\r\n\r\n  async function handleSend() {\r\n    const input = document.getElementById(\"gaia-input\") as HTMLInputElement;\r\n    const text = input.value.trim();\r\n    if (!text) return;\r\n\r\n    input.value = \"\";\r\n\r\n    const reply = await send(text);\r\n\r\n    setMessages((m) => [...m, { user: text, gaia: reply }]);\r\n  }\r\n\r\n  function resetChat() {\r\n    setMessages([]);\r\n  }\r\n\r\n  async function resetMemory() {\r\n    await fetch(\"/api/resetMemory\");\r\n    alert(\"GAIA memory cleared.\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <button className=\"gaia-btn icon chat-toggle\" onClick={() => setOpen(!open)}>\r\n        {open ? \"✖\" : \"GAIA\"}\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"chat-popup glass\">\r\n          <div className=\"chat-header\">\r\n            <strong>GAIA Assistant</strong>\r\n          </div>\r\n\r\n          <div className=\"chat-window\">\r\n            {messages.map((m, i) => (\r\n              <div key={i} className=\"chat-block\">\r\n                <div className=\"you\">You: {m.user}</div>\r\n                <div className=\"gaia\">GAIA: {m.gaia}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"chat-controls\">\r\n            <input id=\"gaia-input\" placeholder=\"Ask GAIA...\" />\r\n            <button className=\"gaia-btn primary\" onClick={handleSend}>Send</button>\r\n          </div>\r\n\r\n          <div className=\"chat-actions\">\r\n            <button className=\"gaia-btn pill\" onClick={resetChat}>Clear Chat</button>\r\n            <button className=\"gaia-btn danger\" onClick={resetMemory}>\r\n              Reset Memory\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAE3C,eAAe,KAAK,GAAW;QAC7B,MAAM,MAAM,MAAM,MAAM,aAAa;YACnC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU;oBACR;wBAAE,MAAM;wBAAU,SAAS;oBAAgB;oBAC3C;wBAAE,MAAM;wBAAQ,SAAS;oBAAI;iBAC9B;YACH;QACF;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,KAAK,KAAK;IACnB;IAEA,eAAe;QACb,MAAM,QAAQ,SAAS,cAAc,CAAC;QACtC,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI;QAC7B,IAAI,CAAC,MAAM;QAEX,MAAM,KAAK,GAAG;QAEd,MAAM,QAAQ,MAAM,KAAK;QAEzB,YAAY,CAAC,IAAM;mBAAI;gBAAG;oBAAE,MAAM;oBAAM,MAAM;gBAAM;aAAE;IACxD;IAEA,SAAS;QACP,YAAY,EAAE;IAChB;IAEA,eAAe;QACb,MAAM,MAAM;QACZ,MAAM;IACR;IAEA,qBACE;;0BACE,8OAAC;gBAAO,WAAU;gBAA4B,SAAS,IAAM,QAAQ,CAAC;0BACnE,OAAO,MAAM;;;;;;YAGf,sBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;sCAAO;;;;;;;;;;;kCAGV,8OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,8OAAC;gCAAY,WAAU;;kDACrB,8OAAC;wCAAI,WAAU;;4CAAM;4CAAM,EAAE,IAAI;;;;;;;kDACjC,8OAAC;wCAAI,WAAU;;4CAAO;4CAAO,EAAE,IAAI;;;;;;;;+BAF3B;;;;;;;;;;kCAOd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,IAAG;gCAAa,aAAY;;;;;;0CACnC,8OAAC;gCAAO,WAAU;gCAAmB,SAAS;0CAAY;;;;;;;;;;;;kCAG5D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAO,WAAU;gCAAgB,SAAS;0CAAW;;;;;;0CACtD,8OAAC;gCAAO,WAAU;gCAAkB,SAAS;0CAAa;;;;;;;;;;;;;;;;;;;;AAQtE","debugId":null}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaSimulation.ts"],"sourcesContent":["// lib/useGaiaSimulation.ts\r\n'use client';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL || '',\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\r\n);\r\n\r\nexport default function useGaiaSimulation() {\r\n  const [inputs, setInputs] = useState<any>({\r\n    co2: 40,\r\n    def: 20,\r\n    ren: 55,\r\n    pol: 35,\r\n    pop: 20,\r\n    airweaver: false,\r\n    airweaver_int: 40,\r\n    algae: false,\r\n    algae_int: 30,\r\n    cryo: false,\r\n    cryo_int: 20,\r\n    biosynth: false,\r\n    biosynth_int: 10,\r\n    reforest: false,\r\n    reforest_int: 30,\r\n    ccapture: false,\r\n    ccapture_int: 25,\r\n    transport: false,\r\n    transport_int: 40,\r\n    urbangreen: false,\r\n    urbangreen_int: 30\r\n  });\r\n  const [method, setMethod] = useState<'manual'|'preset'|'mc'|'ai'>('manual');\r\n  const [result, setResult] = useState<any>(null);\r\n\r\n  const clamp = (v:number, min:number, max:number) => Math.max(min, Math.min(max, v));\r\n\r\n  const compute = useCallback((vals:any) => {\r\n    const co2 = clamp(vals.co2,0,100);\r\n    const def = clamp(vals.def,0,100);\r\n    const pop = clamp(vals.pop,-20,80);\r\n    const ren = clamp(vals.ren,0,100);\r\n    const pol = clamp(vals.pol,0,100);\r\n\r\n    const interventions = {\r\n      airweaver: vals.airweaver ? clamp(vals.airweaver_int,0,100):0,\r\n      algae: vals.algae ? clamp(vals.algae_int,0,100):0,\r\n      cryo: vals.cryo ? clamp(vals.cryo_int,0,100):0,\r\n      biosynth: vals.biosynth ? clamp(vals.biosynth_int,0,100):0,\r\n      reforest: vals.reforest ? clamp(vals.reforest_int,0,100):0,\r\n      ccapture: vals.ccapture ? clamp(vals.ccapture_int,0,100):0,\r\n      transport: vals.transport ? clamp(vals.transport_int,0,100):0,\r\n      urbangreen: vals.urbangreen ? clamp(vals.urbangreen_int,0,100):0\r\n    };\r\n\r\n    const p_co2 = co2 * 0.32;\r\n    const p_def = def * 0.22;\r\n    const p_pop = (pop>0?pop:0) * 0.10;\r\n    const base_positive = ren * 0.28 + pol * 0.18;\r\n\r\n    function eff(x:number, weight:number){\r\n      return weight * (0.2 + 0.8 * Math.tanh(x/120 * 2.5));\r\n    }\r\n    const iv = interventions;\r\n    const interventionScore =\r\n      eff(iv.airweaver, 18) + eff(iv.algae, 12) + eff(iv.cryo, 10) +\r\n      eff(iv.biosynth, 10) + eff(iv.reforest, 24) + eff(iv.ccapture, 16) +\r\n      eff(iv.transport, 20) + eff(iv.urbangreen, 12);\r\n\r\n    let raw = 50\r\n      + (base_positive * 0.24)\r\n      + (interventionScore * 0.5)\r\n      - (p_co2 * 0.35)\r\n      - (p_def * 0.28)\r\n      - (p_pop * 0.4);\r\n\r\n    if(co2 > 80) raw -= (co2-80)*0.35;\r\n    if(def > 70) raw -= (def-70)*0.25;\r\n\r\n    const index = Math.round(clamp(raw, 0, 100));\r\n    const tempDrift = Number(((co2/100)*2.5 - (interventionScore/200)).toFixed(2));\r\n    const biodiversity = Math.round(50 + (index-50)*0.6);\r\n    const seaLevel = Number(((def/100)*0.15 + (co2/100)*0.1 - (iv.reforest? iv.reforest/100*0.02 : 0)).toFixed(3));\r\n\r\n    return { index, tempDrift, biodiversity, seaLevel, interventionsApplied: interventions };\r\n  }, []);\r\n\r\n  const simulate = useCallback(() => {\r\n    const r = compute(inputs);\r\n    setResult(r);\r\n    localStorage.setItem('gaia_result', JSON.stringify(r));\r\n    return r;\r\n  }, [inputs, compute]);\r\n\r\n  const applyAISuggestion = useCallback(() => {\r\n    setInputs(prev => {\r\n      const base = {...prev};\r\n      if(base.co2 > 55){\r\n        base.ren = clamp(base.ren + 25,0,100);\r\n        base.ccapture = true; base.ccapture_int = 60;\r\n        base.reforest = true; base.reforest_int = 45;\r\n        base.transport = true; base.transport_int = 50;\r\n      } else if(base.def > 50){\r\n        base.reforest = true; base.reforest_int = 70;\r\n        base.urbangreen = true; base.urbangreen_int = 40;\r\n      } else {\r\n        base.pol = clamp(base.pol + 20,0,100);\r\n        base.urbangreen = true; base.urbangreen_int = 35;\r\n      }\r\n      return base;\r\n    });\r\n  }, []);\r\n\r\n  const runMonteCarlo = useCallback((runs = 40) => {\r\n    const results:number[] = [];\r\n    for(let i=0;i<runs;i++){\r\n      const base = JSON.parse(JSON.stringify(inputs));\r\n      ['co2','def','ren','pol','pop'].forEach((k:any)=> {\r\n        const jitter = (Math.random()*0.5 - 0.25);\r\n        base[k] = clamp(Math.round(base[k] * (1 + jitter)), -20, 100);\r\n      });\r\n      ['airweaver','algae','cryo','biosynth','reforest','ccapture','transport','urbangreen'].forEach((k:any)=>{\r\n        if(base[k]) base[k+'_int'] = clamp(Math.round(base[k+'_int'] * (0.6 + Math.random()*0.9)), 0, 100);\r\n        else if(Math.random() < 0.08) { base[k+'_int'] = Math.round(Math.random()*60); base[k]=true; }\r\n      });\r\n      const r = compute(base);\r\n      results.push(r.index);\r\n    }\r\n    const avg = Math.round(results.reduce((a,b)=>a+b,0)/results.length);\r\n    const baseComputed = compute(inputs);\r\n    baseComputed.index = avg;\r\n    setResult(baseComputed);\r\n    localStorage.setItem('gaia_result', JSON.stringify(baseComputed));\r\n    return baseComputed;\r\n  }, [inputs, compute]);\r\n\r\n  useEffect(()=> {\r\n    const raw = localStorage.getItem('gaia_result');\r\n    if(raw) setResult(JSON.parse(raw));\r\n  }, []);\r\n\r\n  // scenario save / load (now supports remote save to Supabase)\r\n  const saveScenario = useCallback(async (name:string, location?: string) => {\r\n    const s = JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n    const payload = { name, vals: inputs, created: Date.now(), location: location || 'Global' };\r\n    s.push(payload);\r\n    localStorage.setItem('gaia_scenarios', JSON.stringify(s));\r\n\r\n    // Try to persist to Supabase if client keys available\r\n    try {\r\n      const prepared = {\r\n        name,\r\n        inputs_json: inputs,\r\n        result_json: result || compute(inputs),\r\n        ai_analysis: null,\r\n        location: location || 'Global',\r\n        created_at: new Date().toISOString()\r\n      };\r\n      const { error } = await supabase\r\n        .from('scenarios')\r\n        .insert([prepared]);\r\n\r\n      if (error) {\r\n        console.warn('Supabase insert (saveScenario) returned error:', error);\r\n        throw error;\r\n      }\r\n      return true;\r\n    } catch (err) {\r\n      console.error('saveScenario remote failed', err);\r\n      // still resolve so UI doesn't block — caller will be informed via thrown error\r\n      throw err;\r\n    }\r\n  }, [inputs, result, compute]);\r\n\r\n  const loadScenarioList = useCallback(()=> {\r\n    return JSON.parse(localStorage.getItem('gaia_scenarios') || '[]');\r\n  }, []);\r\n\r\n  return {\r\n    inputs, setInputs, method, setMethod, result,\r\n    simulate, applyAISuggestion, runMonteCarlo, saveScenario, loadScenarioList,\r\n    setResult\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useLastSimulation.ts"],"sourcesContent":["// lib/useLastSimulation.ts\r\n'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);\r\n\r\nexport default function useLastSimulation() {\r\n  const [lastResult, setLastResult] = useState<any>(null);\r\n  const [lastAnalysis, setLastAnalysis] = useState<string>('');\r\n  const [scenarios, setScenarios] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchLastSimulation();\r\n  }, []);\r\n\r\n  async function fetchLastSimulation() {\r\n    try {\r\n      const { data: state } = await supabase\r\n        .from('gaia_state_cache')\r\n        .select('merged_state, ai_summary, last_scenario_id')\r\n        .eq('id', 1)\r\n        .single();\r\n\r\n      if (state?.merged_state) {\r\n        setLastResult(state.merged_state);\r\n        setLastAnalysis(state.ai_summary || '');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch last simulation:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function fetchScenarios() {\r\n    try {\r\n      const { data } = await supabase\r\n        .from('scenarios')\r\n        .select('id, inputs_json, result_json, ai_analysis, created_at')\r\n        .order('created_at', { ascending: false })\r\n        .limit(20);\r\n\r\n      setScenarios(data || []);\r\n    } catch (err) {\r\n      console.error('Failed to fetch scenarios:', err);\r\n    }\r\n  }\r\n\r\n  async function loadScenario(id: number) {\r\n    try {\r\n      const { data } = await supabase\r\n        .from('scenarios')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n      if (data?.result_json) {\r\n        setLastResult(data.result_json);\r\n        setLastAnalysis(data.ai_analysis || '');\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load scenario:', err);\r\n    }\r\n  }\r\n\r\n  return {\r\n    lastResult,\r\n    lastAnalysis,\r\n    scenarios,\r\n    loading,\r\n    fetchLastSimulation,\r\n    fetchScenarios,\r\n    loadScenario\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAE3B;AACA;AAFA;;;AAIA,MAAM,WAAW,IAAA,uMAAY;AAKd,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAM;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,IAAI;YACF,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,oBACL,MAAM,CAAC,8CACP,EAAE,CAAC,MAAM,GACT,MAAM;YAET,IAAI,OAAO,cAAc;gBACvB,cAAc,MAAM,YAAY;gBAChC,gBAAgB,MAAM,UAAU,IAAI;YACtC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,oCAAoC;QACpD,SAAU;YACR,WAAW;QACb;IACF;IAEA,eAAe;QACb,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,aACL,MAAM,CAAC,yDACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC;YAET,aAAa,QAAQ,EAAE;QACzB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,eAAe,aAAa,EAAU;QACpC,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;YAET,IAAI,MAAM,aAAa;gBACrB,cAAc,KAAK,WAAW;gBAC9B,gBAAgB,KAAK,WAAW,IAAI;YACtC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/Gauge.tsx"],"sourcesContent":["// components/Gauge.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nexport default function Gauge({ value }: { value: number | string }){\r\n  const canvasRef = useRef<HTMLCanvasElement|null>(null);\r\n  useEffect(()=>{\r\n    const c = canvasRef.current;\r\n    if(!c) return;\r\n    const ctx = c.getContext('2d')!;\r\n    const w = c.width, h = c.height;\r\n    ctx.clearRect(0,0,w,h);\r\n    const idx = typeof value === 'number' ? value : (value === '—' ? 50 : Number(value));\r\n    // background arc\r\n    ctx.beginPath(); ctx.lineWidth = 12; ctx.strokeStyle = 'rgba(255,255,255,0.06)';\r\n    ctx.arc(w/2, h, w*0.35, Math.PI, 2*Math.PI, false); ctx.stroke();\r\n    // value arc\r\n    const start = Math.PI, end = Math.PI + (idx/100)*Math.PI;\r\n    const hue = idx>65?150:idx>40?45:0;\r\n    ctx.beginPath(); ctx.strokeStyle = `hsla(${hue},80%,60%,0.95)`; ctx.lineCap='round';\r\n    ctx.arc(w/2, h, w*0.35, start, end, false); ctx.lineWidth = 12; ctx.stroke();\r\n    // text\r\n    ctx.fillStyle = 'rgba(255,255,255,0.9)'; ctx.font = '14px sans-serif';\r\n    ctx.fillText((typeof value === 'number' ? value : String(value)) + ' / 100', w/2 - 22, h-18);\r\n  },[value]);\r\n  return <canvas ref={canvasRef} className=\"gauge-arc\" width={180} height={90} />;\r\n}\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AAEvB;AADA;;;AAGe,SAAS,MAAM,EAAE,KAAK,EAA8B;IACjE,MAAM,YAAY,IAAA,+MAAM,EAAyB;IACjD,IAAA,kNAAS,EAAC;QACR,MAAM,IAAI,UAAU,OAAO;QAC3B,IAAG,CAAC,GAAG;QACP,MAAM,MAAM,EAAE,UAAU,CAAC;QACzB,MAAM,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM;QAC/B,IAAI,SAAS,CAAC,GAAE,GAAE,GAAE;QACpB,MAAM,MAAM,OAAO,UAAU,WAAW,QAAS,UAAU,MAAM,KAAK,OAAO;QAC7E,iBAAiB;QACjB,IAAI,SAAS;QAAI,IAAI,SAAS,GAAG;QAAI,IAAI,WAAW,GAAG;QACvD,IAAI,GAAG,CAAC,IAAE,GAAG,GAAG,IAAE,MAAM,KAAK,EAAE,EAAE,IAAE,KAAK,EAAE,EAAE;QAAQ,IAAI,MAAM;QAC9D,YAAY;QACZ,MAAM,QAAQ,KAAK,EAAE,EAAE,MAAM,KAAK,EAAE,GAAG,AAAC,MAAI,MAAK,KAAK,EAAE;QACxD,MAAM,MAAM,MAAI,KAAG,MAAI,MAAI,KAAG,KAAG;QACjC,IAAI,SAAS;QAAI,IAAI,WAAW,GAAG,CAAC,KAAK,EAAE,IAAI,cAAc,CAAC;QAAE,IAAI,OAAO,GAAC;QAC5E,IAAI,GAAG,CAAC,IAAE,GAAG,GAAG,IAAE,MAAM,OAAO,KAAK;QAAQ,IAAI,SAAS,GAAG;QAAI,IAAI,MAAM;QAC1E,OAAO;QACP,IAAI,SAAS,GAAG;QAAyB,IAAI,IAAI,GAAG;QACpD,IAAI,QAAQ,CAAC,CAAC,OAAO,UAAU,WAAW,QAAQ,OAAO,MAAM,IAAI,UAAU,IAAE,IAAI,IAAI,IAAE;IAC3F,GAAE;QAAC;KAAM;IACT,qBAAO,8OAAC;QAAO,KAAK;QAAW,WAAU;QAAY,OAAO;QAAK,QAAQ;;;;;;AAC3E","debugId":null}},
    {"offset": {"line": 644, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/lib/useGaiaState.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function useGaiaState() {\r\n  const [state, setState] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function refresh() {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/state\", { cache: \"no-store\" });\r\n      const json = await res.json();\r\n      setState(json.state);\r\n    } catch (e) {\r\n      console.error(\"GAIA state load error\", e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return { state, loading, refresh };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAM;IACxC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,eAAe;QACb,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,cAAc;gBAAE,OAAO;YAAW;YAC1D,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS,KAAK,KAAK;QACrB,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,OAAO;QAAE;QAAO;QAAS;IAAQ;AACnC","debugId":null}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/EarthPreview.tsx"],"sourcesContent":["// components/EarthPreview.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport useGaiaState from '@/lib/useGaiaState';\r\n\r\nexport default function EarthPreview({ size = 120 }: { size?: number }) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d')!;\r\n    const w = canvas.width;\r\n    const h = canvas.height;\r\n    const centerX = w / 2;\r\n    const centerY = h / 2;\r\n    const radius = Math.min(w, h) / 2 - 5;\r\n\r\n    // Get tint from state or use default blue\r\n    const tint = !loading && state?.earth_tint ? state.earth_tint : '#1c8cf9';\r\n\r\n    // Draw background\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Draw Earth sphere with gradient\r\n    const gradient = ctx.createRadialGradient(centerX - 10, centerY - 10, 0, centerX, centerY, radius);\r\n    gradient.addColorStop(0, tint);\r\n    gradient.addColorStop(0.7, tint + 'dd');\r\n    gradient.addColorStop(1, '#021822');\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Draw Earth outline\r\n    ctx.strokeStyle = 'rgba(255,255,255,0.1)';\r\n    ctx.lineWidth = 1;\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n\r\n    // Add some landmass texture\r\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\r\n    for (let i = 0; i < 5; i++) {\r\n      const angle = (i / 5) * Math.PI * 2;\r\n      const x = centerX + Math.cos(angle) * radius * 0.6;\r\n      const y = centerY + Math.sin(angle) * radius * 0.6;\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius * 0.25, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n\r\n    // Draw risk indicator if available\r\n    if (!loading && state?.risk_val != null) {\r\n      const riskRadius = radius * (1 + state.risk_val * 0.3);\r\n      ctx.strokeStyle = state.risk_val > 0.6 ? 'rgba(255, 100, 100, 0.4)' : 'rgba(100, 200, 100, 0.4)';\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, riskRadius, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n    }\r\n  }, [state, loading]);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: 8 }}>\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={size}\r\n        height={size}\r\n        style={{\r\n          borderRadius: '50%',\r\n          boxShadow: '0 0 20px rgba(58, 209, 255, 0.2)',\r\n          display: 'block'\r\n        }}\r\n      />\r\n      <button \r\n        className=\"gaia-btn ghost\" \r\n        onClick={() => refresh()} \r\n        disabled={loading}\r\n        style={{ fontSize: '11px', padding: '4px 10px' }}\r\n      >\r\n        {loading ? 'Syncing...' : 'Refresh'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAE9B;AACA;AAFA;;;;AAIe,SAAS,aAAa,EAAE,OAAO,GAAG,EAAqB;IACpE,MAAM,YAAY,IAAA,+MAAM,EAAoB;IAC5C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,8HAAY;IAEhD,IAAA,kNAAS,EAAC;QACR,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QAEb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,MAAM,IAAI,OAAO,KAAK;QACtB,MAAM,IAAI,OAAO,MAAM;QACvB,MAAM,UAAU,IAAI;QACpB,MAAM,UAAU,IAAI;QACpB,MAAM,SAAS,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI;QAEpC,0CAA0C;QAC1C,MAAM,OAAO,CAAC,WAAW,OAAO,aAAa,MAAM,UAAU,GAAG;QAEhE,kBAAkB;QAClB,IAAI,SAAS,CAAC,GAAG,GAAG,GAAG;QAEvB,kCAAkC;QAClC,MAAM,WAAW,IAAI,oBAAoB,CAAC,UAAU,IAAI,UAAU,IAAI,GAAG,SAAS,SAAS;QAC3F,SAAS,YAAY,CAAC,GAAG;QACzB,SAAS,YAAY,CAAC,KAAK,OAAO;QAClC,SAAS,YAAY,CAAC,GAAG;QAEzB,IAAI,SAAS,GAAG;QAChB,IAAI,SAAS;QACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,KAAK,EAAE,GAAG;QAC/C,IAAI,IAAI;QAER,qBAAqB;QACrB,IAAI,WAAW,GAAG;QAClB,IAAI,SAAS,GAAG;QAChB,IAAI,SAAS;QACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,KAAK,EAAE,GAAG;QAC/C,IAAI,MAAM;QAEV,4BAA4B;QAC5B,IAAI,SAAS,GAAG;QAChB,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAC1B,MAAM,QAAQ,AAAC,IAAI,IAAK,KAAK,EAAE,GAAG;YAClC,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS,SAAS;YAC/C,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS,SAAS;YAC/C,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,GAAG,GAAG,SAAS,MAAM,GAAG,KAAK,EAAE,GAAG;YAC1C,IAAI,IAAI;QACV;QAEA,mCAAmC;QACnC,IAAI,CAAC,WAAW,OAAO,YAAY,MAAM;YACvC,MAAM,aAAa,SAAS,CAAC,IAAI,MAAM,QAAQ,GAAG,GAAG;YACrD,IAAI,WAAW,GAAG,MAAM,QAAQ,GAAG,MAAM,6BAA6B;YACtE,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,YAAY,GAAG,KAAK,EAAE,GAAG;YACnD,IAAI,MAAM;QACZ;IACF,GAAG;QAAC;QAAO;KAAQ;IAEnB,qBACE,8OAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,eAAe;YAAU,YAAY;YAAU,KAAK;QAAE;;0BACnF,8OAAC;gBACC,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,OAAO;oBACL,cAAc;oBACd,WAAW;oBACX,SAAS;gBACX;;;;;;0BAEF,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM;gBACf,UAAU;gBACV,OAAO;oBAAE,UAAU;oBAAQ,SAAS;gBAAW;0BAE9C,UAAU,eAAe;;;;;;;;;;;;AAIlC","debugId":null}},
    {"offset": {"line": 791, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/RealTimeGraph.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\ntype SeriesPoint = { x: number; y: number };\r\n\r\nexport default function RealTimeGraph({\r\n  title = 'Series',\r\n  color = '#2de8a7',\r\n  data = [] as SeriesPoint[],\r\n  height = 120\r\n}: {\r\n  title?: string;\r\n  color?: string;\r\n  data?: SeriesPoint[];\r\n  height?: number;\r\n}){\r\n  const ref = useRef<SVGSVGElement | null>(null);\r\n\r\n  // Simple SVG polyline renderer with axes. Recalculates path when data changes.\r\n  useEffect(()=>{\r\n    const svg = ref.current;\r\n    if(!svg) return;\r\n    const w = svg.clientWidth || 300;\r\n    const h = height;\r\n    if(!data || data.length===0){\r\n      const poly = svg.querySelector('polyline');\r\n      if(poly) poly.setAttribute('points','');\r\n      // Clear axes\r\n      const existingAxes = svg.querySelectorAll('.axis');\r\n      existingAxes.forEach(el => el.remove());\r\n      return;\r\n    }\r\n\r\n    const xs = data.map(p=>p.x);\r\n    const ys = data.map(p=>p.y);\r\n    const xmin = Math.min(...xs); const xmax = Math.max(...xs);\r\n    const ymin = Math.min(...ys); const ymax = Math.max(...ys);\r\n    const xRange = xmax - xmin || 1;\r\n    const yRange = ymax - ymin || 1;\r\n\r\n    const points = data.map(p=>{\r\n      const x = ((p.x - xmin)/xRange) * (w - 40) + 40; // offset for y-axis\r\n      const y = h - 20 - ((p.y - ymin)/yRange) * (h - 40); // offset for x-axis\r\n      return `${x},${y}`;\r\n    }).join(' ');\r\n\r\n    const poly = svg.querySelector('polyline');\r\n    if(poly) poly.setAttribute('points', points);\r\n\r\n    // Draw axes\r\n    const existingAxes = svg.querySelectorAll('.axis');\r\n    existingAxes.forEach(el => el.remove());\r\n\r\n    // Y-axis\r\n    const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n    yAxis.setAttribute('x1', '40');\r\n    yAxis.setAttribute('y1', '20');\r\n    yAxis.setAttribute('x2', '40');\r\n    yAxis.setAttribute('y2', (h - 20).toString());\r\n    yAxis.setAttribute('stroke', 'var(--muted)');\r\n    yAxis.setAttribute('stroke-width', '1');\r\n    yAxis.classList.add('axis');\r\n    svg.appendChild(yAxis);\r\n\r\n    // X-axis\r\n    const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n    xAxis.setAttribute('x1', '40');\r\n    xAxis.setAttribute('y1', (h - 20).toString());\r\n    xAxis.setAttribute('x2', w.toString());\r\n    xAxis.setAttribute('y2', (h - 20).toString());\r\n    xAxis.setAttribute('stroke', 'var(--muted)');\r\n    xAxis.setAttribute('stroke-width', '1');\r\n    xAxis.classList.add('axis');\r\n    svg.appendChild(xAxis);\r\n\r\n    // Y-axis labels\r\n    for(let i=0; i<=5; i++){\r\n      const val = ymin + (yRange / 5) * i;\r\n      const yPos = h - 20 - (i / 5) * (h - 40);\r\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n      text.setAttribute('x', '35');\r\n      text.setAttribute('y', (yPos + 4).toString());\r\n      text.setAttribute('text-anchor', 'end');\r\n      text.setAttribute('font-size', '10');\r\n      text.setAttribute('fill', 'var(--muted)');\r\n      text.textContent = val.toFixed(1);\r\n      text.classList.add('axis');\r\n      svg.appendChild(text);\r\n    }\r\n\r\n    // X-axis labels\r\n    for(let i=0; i<=5; i++){\r\n      const val = xmin + (xRange / 5) * i;\r\n      const xPos = 40 + (i / 5) * (w - 40);\r\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n      text.setAttribute('x', xPos.toString());\r\n      text.setAttribute('y', (h - 5).toString());\r\n      text.setAttribute('text-anchor', 'middle');\r\n      text.setAttribute('font-size', '10');\r\n      text.setAttribute('fill', 'var(--muted)');\r\n      text.textContent = val.toFixed(1);\r\n      text.classList.add('axis');\r\n      svg.appendChild(text);\r\n    }\r\n  }, [data, height]);\r\n\r\n  return (\r\n    <div style={{width:'100%'}}>\r\n      <div style={{display:'flex', justifyContent:'space-between', marginBottom:6}}>\r\n        <strong style={{fontSize:13}}>{title}</strong>\r\n        <div style={{fontSize:12, color:'var(--muted)'}}>{data.length} pts</div>\r\n      </div>\r\n      <svg ref={ref} height={height} style={{width:'100%'}}>\r\n        <defs>\r\n          <linearGradient id=\"g1\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n            <stop offset=\"0%\" stopColor={color} stopOpacity=\"0.18\" />\r\n            <stop offset=\"100%\" stopColor={color} stopOpacity=\"0.02\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <rect x={0} y={0} width=\"100%\" height={height} fill=\"url(#g1)\" />\r\n        <polyline fill=\"none\" stroke={color} strokeWidth={2} points=\"\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1012, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/HelpTooltip.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from 'react';\r\n\r\nexport default function HelpTooltip({ title, children }:{ title?:string; children:React.ReactNode }){\r\n  const [open, setOpen] = useState(false);\r\n  return (\r\n    <span style={{display:'inline-block'}}>\r\n      <button onClick={()=>setOpen(o=>!o)} style={{border:'none',background:'transparent',color:'var(--muted)',cursor:'pointer',padding:4}}>❔</button>\r\n      {open ? (\r\n        <div style={{position:'absolute', zIndex:9999, maxWidth:320, background:'var(--panel)', color:'var(--ink)', border:'1px solid rgba(255,255,255,0.04)', padding:12, borderRadius:8}}>\r\n          <strong style={{display:'block', marginBottom:6}}>{title || 'Help'}</strong>\r\n          <div style={{fontSize:13, color:'var(--muted)'}}>{children}</div>\r\n        </div>\r\n      ) : null}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAA8C;IACjG,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,qBACE,8OAAC;QAAK,OAAO;YAAC,SAAQ;QAAc;;0BAClC,8OAAC;gBAAO,SAAS,IAAI,QAAQ,CAAA,IAAG,CAAC;gBAAI,OAAO;oBAAC,QAAO;oBAAO,YAAW;oBAAc,OAAM;oBAAe,QAAO;oBAAU,SAAQ;gBAAC;0BAAG;;;;;;YACrI,qBACC,8OAAC;gBAAI,OAAO;oBAAC,UAAS;oBAAY,QAAO;oBAAM,UAAS;oBAAK,YAAW;oBAAgB,OAAM;oBAAc,QAAO;oBAAoC,SAAQ;oBAAI,cAAa;gBAAC;;kCAC/K,8OAAC;wBAAO,OAAO;4BAAC,SAAQ;4BAAS,cAAa;wBAAC;kCAAI,SAAS;;;;;;kCAC5D,8OAAC;wBAAI,OAAO;4BAAC,UAAS;4BAAI,OAAM;wBAAc;kCAAI;;;;;;;;;;;uBAElD;;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 1094, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/CityTab.tsx"],"sourcesContent":["// components/CityTab.tsx\r\n\"use client\";\r\nimport React, { useState } from 'react';\r\nimport PreviewCanvas from './PreviewCanvas';\r\nimport RealTimeGraph from './RealTimeGraph';\r\nimport HelpTooltip from './HelpTooltip';\r\n\r\nexport default function CityTab({\r\n  city = 'City',\r\n  baseImg,\r\n  predImg,\r\n  inputs,\r\n  onChange\r\n}:{\r\n  city?: string;\r\n  baseImg?: string;\r\n  predImg?: string;\r\n  inputs: any;\r\n  onChange: (k:string, v:any)=>void;\r\n}){\r\n  const [sub, setSub] = useState<'ai'|'mc'|'preset'>('ai');\r\n\r\n  // Create mock series data from inputs to feed graphs\r\n  const time = Date.now();\r\n  const seriesA = Array.from({length:28}).map((_,i)=>({ x: i, y: Math.max(0, (inputs.co2||50) + (i-14) * 0.5 + (inputs.ren? - (inputs.ren/100)*10 : 0)) }));\r\n  const seriesB = Array.from({length:28}).map((_,i)=>({ x: i, y: Math.max(0, (inputs.def||40) + Math.sin(i/4) * 6 - (inputs.reforest_int||0)/10) }));\r\n\r\n  return (\r\n    <div>\r\n      <div style={{display:'flex', gap:8, marginBottom:8}}>\r\n        <div className={`subtab ${sub==='ai'?'active':''}`} onClick={()=>setSub('ai')}>AI Suggestions</div>\r\n        <div className={`subtab ${sub==='mc'?'active':''}`} onClick={()=>setSub('mc')}>Monte Carlo</div>\r\n        <div className={`subtab ${sub==='preset'?'active':''}`} onClick={()=>setSub('preset')}>Preset Scenarios</div>\r\n      </div>\r\n\r\n      <div style={{display:'grid', gridTemplateColumns:'1fr 320px', gap:12}}>\r\n        <div>\r\n          <div style={{display:'flex', gap:10}}>\r\n            <div style={{flex:1}}>\r\n              <label>Current satellite view — {city}</label>\r\n              <div style={{position:'relative'}}>\r\n                <img src={baseImg} style={{width:'100%', borderRadius:10}} alt={`${city} current`} />\r\n                <div style={{position:'absolute', right:8, top:8}} className=\"pill\">Now</div>\r\n              </div>\r\n            </div>\r\n            <div style={{width:320}}>\r\n              <label>Predicted — {city}</label>\r\n              <div style={{position:'relative'}}>\r\n                <img src={predImg} style={{width:'100%', borderRadius:10}} alt={`${city} pred`} />\r\n                <div style={{position:'absolute', right:8, top:8}} className=\"pill\">Projected</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{marginTop:12}}>\r\n            <RealTimeGraph title=\"CO₂ Projection\" data={seriesA} />\r\n            <div style={{height:8}} />\r\n            <RealTimeGraph title=\"Deforestation Pressure\" color=\"#ffd265\" data={seriesB} />\r\n          </div>\r\n        </div>\r\n\r\n        <aside className=\"card\">\r\n          <div style={{fontSize:13, color:'var(--muted)'}}>\r\n            <strong>{city} tools</strong>\r\n            <div style={{marginTop:8}}>\r\n              {sub==='ai' && (<div>\r\n                <div className=\"muted-block\">AI suggestions tailor interventions for local conditions.</div>\r\n                <div style={{marginTop:8}}><button className=\"gaia-btn primary\" onClick={()=>alert('AI suggestion (demo) applied')}>Apply AI Suggestion</button></div>\r\n              </div>)}\r\n\r\n              {sub==='mc' && (<div>\r\n                <div className=\"muted-block\">Run Monte Carlo simulations for {city} to estimate outcome ranges.</div>\r\n                <div style={{display:'flex', gap:8, marginTop:8}}>\r\n                  <input defaultValue={40} type=\"number\" style={{width:90,padding:8,borderRadius:8}} />\r\n                  <button className=\"gaia-btn primary\" onClick={()=>alert('Run MC demo')}>Run</button>\r\n                </div>\r\n              </div>)}\r\n\r\n              {sub==='preset' && (<div>\r\n                <div className=\"muted-block\">Apply preset scenarios tuned for {city} (urban density, coastal exposure).</div>\r\n                <div style={{display:'flex', gap:8, marginTop:8, flexWrap:'wrap'}}>\r\n                  <button className=\"gaia-btn ghost\" onClick={()=>alert('Applied urban preset')}>Urban Stress</button>\r\n                  <button className=\"gaia-btn ghost\" onClick={()=>alert('Applied coastal preset')}>Coastal Risk</button>\r\n                </div>\r\n              </div>)}\r\n            </div>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1540, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/GaiaLink.tsx"],"sourcesContent":["// components/GaiaLink.tsx\r\n'use client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport useGaiaSimulation from '../lib/useGaiaSimulation';\r\nimport useLastSimulation from '../lib/useLastSimulation';\r\nimport Gauge from './Gauge';\r\nimport PreviewCanvas from './PreviewCanvas';\r\nimport EarthPreview from './EarthPreview';\r\nimport RealTimeGraph from './RealTimeGraph';\r\nimport HelpTooltip from './HelpTooltip';\r\nimport CityTab from './CityTab';\r\n\r\nexport default function GaiaLink(){\r\n  const {\r\n    inputs, setInputs, method, setMethod, result,\r\n    simulate, applyAISuggestion, runMonteCarlo, saveScenario, setResult\r\n  } = useGaiaSimulation();\r\n\r\n  const { lastResult } = useLastSimulation(); // keep for display if needed\r\n\r\n  const [scenarioName, setScenarioName] = useState('');\r\n  const [city, setCity] = useState<'main'|'delhi'|'mumbai'|'darjeeling'>('main');\r\n  const [co2History, setCo2History] = useState<{x: number, y: number}[]>([]);\r\n  const [historyIndex, setHistoryIndex] = useState(0);\r\n\r\n  // previous inputs helper\r\n  function getPreviousInputs(){\r\n    try{\r\n      const raw = localStorage.getItem('gaia_prev_inputs');\r\n      if(raw) return JSON.parse(raw);\r\n    }catch(e){ /* ignore */ }\r\n    return Object.assign({}, inputs, { co2: Math.max(0, (inputs.co2||50) - 6), def: Math.max(0, (inputs.def||40) - 4), ren: Math.max(0, (inputs.ren||50) - 5), pol: Math.max(0, (inputs.pol||50) - 3), pop: (inputs.pop||0) - 1 });\r\n  }\r\n\r\n  const prev = getPreviousInputs();\r\n\r\n  function buildSeries(xKey:string, yKey:string){\r\n    const points: {x:number;y:number}[] = [];\r\n    for(let i=0;i<20;i++){\r\n      const xBase = (prev[xKey] ?? 0) as number;\r\n      const yBase = (inputs[yKey] ?? 0) as number;\r\n      const x = xBase + Math.sin(i/3) * (Math.max(1, xBase*0.02) );\r\n      const y = yBase + Math.cos(i/4) * (Math.max(1, yBase*0.02) );\r\n      points.push({ x: Math.round(x*100)/100, y: Math.round(y*100)/100 });\r\n    }\r\n    return points;\r\n  }\r\n\r\n  const seriesCO2_def = buildSeries('co2','def');\r\n  const seriesRen_pol = buildSeries('ren','pol');\r\n  const seriesPop_bio = buildSeries('pop','pop');\r\n\r\n  useEffect(()=> {\r\n    if(result){\r\n      // nothing required; Gauge reads prop\r\n    }\r\n  }, [result]);\r\n\r\n  useEffect(() => {\r\n    setCo2History(prev => {\r\n      const newPoint = { x: historyIndex, y: inputs.co2 || 50 };\r\n      const updated = [...prev, newPoint];\r\n      if (updated.length > 50) {\r\n        updated.shift();\r\n      }\r\n      return updated;\r\n    });\r\n    setHistoryIndex(prev => prev + 1);\r\n  }, [inputs.co2]);\r\n\r\n  function handleInputChange(k:string, v:any){\r\n    setInputs((p:any)=>({ ...p, [k]: v }));\r\n  }\r\n\r\n  // runSimulation now forwards `city`\r\n  async function runSimulation() {\r\n    try {\r\n      const resp = await fetch('/api/simulate/gemini', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ inputs, city: city === 'main' ? 'Global' : city.charAt(0).toUpperCase() + city.slice(1) })\r\n      });\r\n\r\n      if (!resp.ok) {\r\n        console.warn('/api/simulate/gemini failed, falling back to /api/simulate');\r\n        throw new Error('gemini route failed');\r\n      }\r\n\r\n      const data = await resp.json();\r\n      if (data?.result) {\r\n        setResult(data.result);\r\n        return;\r\n      }\r\n\r\n      console.warn('No result from gemini route, falling back');\r\n    } catch (err) {\r\n      // fallback to original server simulate endpoint\r\n      try {\r\n        const res = await fetch('/api/simulate', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ inputs, city: city === 'main' ? 'Global' : city.charAt(0).toUpperCase() + city.slice(1) })\r\n        });\r\n        const data = await res.json();\r\n        if (data?.result) setResult(data.result);\r\n      } catch (err2) {\r\n        console.error('Fallback /api/simulate failed', err2);\r\n      }\r\n    }\r\n  }\r\n\r\n  function onSimClick(){\r\n    if(method === 'preset'){ alert('Pick a preset (buttons below)'); return; }\r\n    if(method === 'mc'){ runMonteCarlo(+ (document.getElementById('mcRuns') as HTMLInputElement)?.value || 40); return; }\r\n    if(method === 'ai'){ applyAISuggestion(); alert('AI suggestion applied — now run Simulate.'); return; }\r\n    runSimulation();\r\n  }\r\n\r\n  function applyPreset(which:string){\r\n    if(which==='business'){\r\n      setInputs((p:any)=>({ ...p, co2:65, def:50, ren:30, pol:30, pop:25,\r\n        airweaver:false, algae:false, cryo:false, biosynth:false }));\r\n    } else if(which==='greenrush'){\r\n      setInputs((p:any)=>({ ...p, co2:40, def:25, ren:75, pol:70, pop:18, reforest:true, reforest_int:60, transport:true, transport_int:70 }));\r\n    } else if(which==='radical'){\r\n      setInputs((p:any)=>({ ...p, co2:25, def:10, ren:85, pol:85, pop:5,\r\n        reforest:true, reforest_int:90, algae:true, algae_int:80, biosynth:true, biosynth_int:70, ccapture:true, ccapture_int:70 }));\r\n    } else if(which==='tech-fix'){\r\n      setInputs((p:any)=>({ ...p, co2:48, def:35, ren:50, pol:60, pop:20,\r\n        airweaver:true, airweaver_int:80, cryo:true, cryo_int:60, ccapture:true, ccapture_int:80 }));\r\n    }\r\n    alert('Preset applied: ' + which);\r\n  }\r\n\r\n  function resetSimulations() {\r\n    if (confirm('Are you sure you want to clear all stored simulations? This cannot be undone.')) {\r\n      localStorage.removeItem('gaia_sim_history');\r\n      localStorage.removeItem('gaia_result');\r\n      setResult(null);\r\n      setInputs({ co2: 50, def: 40, ren: 50, pol: 50, pop: 0, airweaver: false, algae: false, cryo: false, biosynth: false, reforest: false, ccapture: false, transport: false, urbangreen: false });\r\n      alert('All simulations cleared.');\r\n    }\r\n  }\r\n\r\n  async function askAISuggestion(){\r\n    try{\r\n      const res = await fetch('/api/suggest', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ inputs })\r\n      });\r\n      const data = await res.json();\r\n      if(data?.suggestion){\r\n        for(const k in data.suggestion){\r\n          setInputs((prev:any)=>({ ...prev, [k]: data.suggestion[k] }));\r\n        }\r\n      } else {\r\n        console.warn('No suggestion returned', data);\r\n      }\r\n    } catch(err){\r\n      console.error('askAISuggestion failed', err);\r\n    }\r\n  }\r\n\r\n  // Save scenario now passes city through to hook (which persists to Supabase)\r\n  async function handleSaveScenario(){\r\n    const name = prompt('Name this scenario (short):','My Scenario');\r\n    if(!name) return;\r\n    try {\r\n      await saveScenario(name, city === 'main' ? 'Global' : city.charAt(0).toUpperCase() + city.slice(1));\r\n      alert('Scenario saved (local + remote).');\r\n    } catch (err) {\r\n      console.error('saveScenario failed', err);\r\n      alert('Saved locally but remote save failed (see console).');\r\n    }\r\n  }\r\n\r\n  const imgForCity = (c: string) => {\r\n    if(c === 'delhi') return 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Delhi_from_space.jpg/512px-Delhi_from_space.jpg';\r\n    if(c === 'mumbai') return 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Mumbai_from_space.jpg/512px-Mumbai_from_space.jpg';\r\n    if(c === 'darjeeling') return 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Darjeeling_from_space.jpg/512px-Darjeeling_from_space.jpg';\r\n    return 'https://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57730/land_ocean_ice_2048.jpg';\r\n  };\r\n\r\n  return (\r\n    <section className=\"card\" id=\"link\">\r\n      <h3 style={{marginTop:0}}>GAIA Link — Simulation Hub</h3>\r\n      <div style={{textAlign:'center', marginBottom:12}}>\r\n        <EarthPreview size={100} />\r\n      </div>\r\n\r\n      <div style={{display:'flex', gap:8, marginTop:8}}>\r\n        <div className={`subtab ${city==='main'?'active':''}`} onClick={()=>setCity('main')}>Global</div>\r\n        <div className={`subtab ${city==='delhi'?'active':''}`} onClick={()=>setCity('delhi')}>Delhi</div>\r\n        <div className={`subtab ${city==='mumbai'?'active':''}`} onClick={()=>setCity('mumbai')}>Mumbai</div>\r\n        <div className={`subtab ${city==='darjeeling'?'active':''}`} onClick={()=>setCity('darjeeling')}>Darjeeling</div>\r\n      </div>\r\n\r\n      {/* City-specific view */}\r\n      <div style={{marginTop:12}}>\r\n        {city === 'main' ? (\r\n          <>\r\n            <div style={{textAlign:'center', marginBottom:12}}></div>\r\n\r\n            {/* Satellite preview (same UI for all tabs; only images change) */}\r\n            <div style={{marginTop:12}}>\r\n              <div style={{display:'flex', gap:12, alignItems:'flex-start', flexWrap:'wrap'}}>\r\n                <div style={{flex:1, minWidth:300}}>\r\n                  <label style={{display:'block', marginBottom:6}}>Current satellite view</label>\r\n                  <div style={{position:'relative', borderRadius:12, overflow:'hidden'}}>\r\n                    <img\r\n                      src={imgForCity('main')}\r\n                      alt=\"current\"\r\n                      style={{width:'100%', display:'block', borderRadius:10}}\r\n                    />\r\n                    <div className=\"pill\" style={{position:'absolute', left:8, top:8}}>Current State</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{width:360, minWidth:280}}>\r\n                  <label style={{display:'block', marginBottom:6}}>Projected image</label>\r\n                  <div style={{position:'relative', borderRadius:12, overflow:'hidden'}}>\r\n                    <img src={'https://upload.wikimedia.org/wikipedia/commons/9/97/The_Earth_seen_from_Apollo_17.jpg'} alt=\"pred\" style={{width:'100%', display:'block', borderRadius:10}} />\r\n                    <div className=\"pill\" style={{position:'absolute', right:8, top:8}} id=\"predTag\">{ result?.tempDrift ? `Projected +${result.tempDrift}°C` : 'Projected' }</div>\r\n                    <div id=\"predTint\" style={{position:'absolute', inset:0, pointerEvents:'none', borderRadius:10, background: result?.earth_tint ? result.earth_tint : 'rgba(45,232,167,0.06)'}} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div style={{display:'', gridTemplateColumns:'1fr 1fr', gap:0, marginTop:12}}>\r\n                <div className=\"card\">\r\n                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                    <strong>CO₂ Levels Over Time</strong>\r\n                    <HelpTooltip title=\"Time Series\">Shows CO₂ levels as sliders are adjusted.</HelpTooltip>\r\n                  </div>\r\n                  <div style={{marginTop:8}}>\r\n                    <RealTimeGraph title=\"CO₂ History\" data={co2History} color={'#2de8a7'} />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"\">\r\n                  <div style={{marginTop:0}}></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <CityTab\r\n            city={city === 'delhi' ? 'Delhi' : city === 'mumbai' ? 'Mumbai' : 'Darjeeling'}\r\n            baseImg={imgForCity(city)}\r\n            predImg={'https://upload.wikimedia.org/wikipedia/commons/9/97/The_Earth_seen_from_Apollo_17.jpg'}\r\n            inputs={inputs}\r\n            onChange={(k:string, v:any)=>handleInputChange(k, v)}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"muted\">Choose a simulation method, tweak levers, or let GAIA suggest optimal mix. Results update live and can be used by Nexus and SymbioSphere.</div>\r\n\r\n      <div style={{marginTop:12}} className=\"subtabs\">\r\n        <div className={`subtab ${method==='manual'?'active':''}`} onClick={()=>setMethod('manual')} data-method=\"manual\">Manual Sliders</div>\r\n        <div className={`subtab ${method==='preset'?'active':''}`} onClick={()=>setMethod('preset')} data-method=\"preset\">Preset Scenarios</div>\r\n        <div className={`subtab ${method==='mc'?'active':''}`} onClick={()=>setMethod('mc')} data-method=\"mc\">Monte-Carlo</div>\r\n        <div className={`subtab ${method==='ai'?'active':''}`} onClick={()=>setMethod('ai')} data-method=\"ai\">AI Suggestion</div>\r\n      </div>\r\n\r\n      {/* Manual (unchanged) */}\r\n      {method === 'manual' && (\r\n        <div id=\"method-manual\" className=\"method-block\">\r\n          <div className=\"controls\">\r\n            <div>\r\n              <label>CO₂ Emissions index</label>\r\n              <input id=\"co2\" type=\"range\" min=\"0\" max=\"100\" value={inputs.co2} onChange={(e)=>handleInputChange('co2', +e.target.value)} />\r\n              <div className=\"muted-block\">Higher = more emissions.</div>\r\n            </div>\r\n\r\n            <div className=\"form-row\" style={{gap:10}}>\r\n              <div style={{flex:1}}>\r\n                <label>Deforestation pressure</label>\r\n                <input id=\"def\" type=\"range\" min=\"0\" max=\"100\" value={inputs.def} onChange={(e)=>handleInputChange('def', +e.target.value)} />\r\n              </div>\r\n              <div style={{flex:1}}>\r\n                <label>Renewables adoption</label>\r\n                <input id=\"ren\" type=\"range\" min=\"0\" max=\"100\" value={inputs.ren} onChange={(e)=>handleInputChange('ren', +e.target.value)} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div style={{flex:1}}>\r\n                <label>Pollution control & regulation</label>\r\n                <input id=\"pol\" type=\"range\" min=\"0\" max=\"100\" value={inputs.pol} onChange={(e)=>handleInputChange('pol', +e.target.value)} />\r\n              </div>\r\n              <div style={{width:170}}>\r\n                <label>Population growth</label>\r\n                <input id=\"pop\" type=\"range\" min=\"-20\" max=\"80\" value={inputs.pop} onChange={(e)=>handleInputChange('pop', +e.target.value)} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"divider\" style={{height:1, background:'rgba(255,255,255,0.03)', margin:'6px 0'}} />\r\n\r\n            <label style={{marginBottom:6}}>Advanced interventions (toggle + intensity)</label>\r\n            <div className=\"toggle\" style={{flexWrap:'wrap'}}>\r\n              {[ ['airweaver','AirWeaver Towers','airweaver_int'],\r\n                ['algae','Algae Seeding','algae_int'],\r\n                ['cryo','CryoSentinel/Reflective Cooling','cryo_int'],\r\n                ['biosynth','BioSynth Loop Pods','biosynth_int'],\r\n                ['reforest','Reforestation Campaign','reforest_int'],\r\n                ['ccapture','Carbon Capture','ccapture_int'],\r\n                ['transport','Transport Electrification','transport_int'],\r\n                ['urbangreen','Urban Greening (roofs)','urbangreen_int']\r\n              ].map(([id,label,intKey])=>(\r\n                <div key={id} style={{minWidth:220}}>\r\n                  <input type=\"checkbox\" id={id as string} checked={!!inputs[id as any]} onChange={(e)=>handleInputChange(id as string, e.target.checked)} />\r\n                  <label htmlFor={id as string} style={{display:'inline', color:'var(--muted)'}}> {label}</label>\r\n                  <div style={{display:'flex', gap:6, marginTop:6}}>\r\n                    <input id={`${id}_int`} type=\"range\" min=\"0\" max=\"100\" value={inputs[intKey as any] || 0} onChange={(e)=>handleInputChange(intKey as string, +e.target.value)} />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div style={{display:'flex', gap:8, marginTop:10, alignItems:'center'}}>\r\n              <button className=\"gaia-btn primary\" id=\"simulateBtn\" onClick={onSimClick}>Simulate Now</button>\r\n              <button className=\"gaia-btn ghost\" id=\"saveScenario\" onClick={handleSaveScenario}>Save Scenario</button>\r\n              <button className=\"gaia-btn danger\" id=\"resetSimulations\" onClick={resetSimulations}>Reset All Simulations</button>\r\n              <div style={{marginLeft:'auto'}} className=\"pill\"><span id=\"lastMethod\">Method: {method==='manual'?'Manual':method==='preset'?'Preset':method==='mc'?'MonteCarlo':'AI Suggest'}</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Preset */}\r\n      {method==='preset' && (\r\n        <div id=\"method-preset\" className=\"method-block\">\r\n          <label>Choose preset</label>\r\n          <div style={{display:'flex', gap:8, flexWrap:'wrap', marginTop:8}}>\r\n            <button className=\"gaia-btn ghost\" onClick={()=>applyPreset('business')}>Business as Usual</button>\r\n            <button className=\"gaia-btn ghost\" onClick={()=>applyPreset('greenrush')}>Green Rush (fast renewables)</button>\r\n            <button className=\"gaia-btn ghost\" onClick={()=>applyPreset('radical')}>Radical Restoration</button>\r\n            <button className=\"gaia-btn ghost\" onClick={()=>applyPreset('tech-fix')}>Tech Fix</button>\r\n          </div>\r\n          <div className=\"muted-block\" style={{marginTop:8}}>Presets set all levers to a recommended configuration.</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Monte Carlo */}\r\n      {method==='mc' && (\r\n        <div id=\"method-mc\" className=\"method-block\">\r\n          <label>Monte-Carlo samples</label>\r\n          <div style={{display:'flex', gap:8, alignItems:'center', marginTop:8}}>\r\n            <input id=\"mcRuns\" type=\"number\" min={10} max={200} defaultValue={40} style={{width:90,padding:8,borderRadius:8,border:'1px solid rgba(255,255,255,0.03)',background:'transparent',color:'var(--ink)'}} />\r\n            <button className=\"gaia-btn primary\" id=\"runMC\" onClick={()=>{ const runs = +(document.getElementById('mcRuns') as HTMLInputElement).value || 40; runMonteCarlo(runs); }}>Run MC</button>\r\n          </div>\r\n          <div className=\"muted-block\" style={{marginTop:8}}>This runs randomized interventions to show distribution of outcomes.</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* AI */}\r\n      {method==='ai' && (\r\n        <div id=\"method-ai\" className=\"method-block\">\r\n          <label>AI Suggestion (heuristic)</label>\r\n          <div className=\"muted-block\">Heuristic suggests a balanced mix. (Demo: deterministic advice based on weak rules.)</div>\r\n          <div style={{marginTop:8}}>\r\n            <button className=\"gaia-btn primary\" id=\"aiSuggest\" onClick={async ()=>{ await askAISuggestion(); alert('AI Suggestion applied (server). Now run Simulate.'); }}>Suggest Best Mix</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{marginTop:12, display:'flex', gap:12, alignItems:'center'}}>\r\n        <div className=\"gauge\">\r\n          <Gauge value={result?.index ?? '—'} />\r\n        </div>\r\n        <div style={{flex:1}}>\r\n          <div className=\"muted-block\">Last simulation summary</div>\r\n          <div style={{marginTop:6}}>\r\n            <div id=\"simSummary\" className=\"pill\">{ result ? `Symbiosis ${result.index} — ΔT: ${result.tempDrift}°C · Biodiversity ${result.biodiversity} · Sea level +${result.seaLevel} m` : 'Run a simulation to see a short summary.' }</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWe,SAAS;IACtB,MAAM,EACJ,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAC5C,QAAQ,EAAE,iBAAiB,EAAE,aAAa,EAAE,YAAY,EAAE,SAAS,EACpE,GAAG,IAAA,mIAAiB;IAErB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,mIAAiB,KAAI,6BAA6B;IAEzE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAuC;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAA2B,EAAE;IACzE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,yBAAyB;IACzB,SAAS;QACP,IAAG;YACD,MAAM,MAAM,aAAa,OAAO,CAAC;YACjC,IAAG,KAAK,OAAO,KAAK,KAAK,CAAC;QAC5B,EAAC,OAAM,GAAE,CAAe;QACxB,OAAO,OAAO,MAAM,CAAC,CAAC,GAAG,QAAQ;YAAE,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,GAAG,IAAE,EAAE,IAAI;YAAI,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,GAAG,IAAE,EAAE,IAAI;YAAI,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,GAAG,IAAE,EAAE,IAAI;YAAI,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC,OAAO,GAAG,IAAE,EAAE,IAAI;YAAI,KAAK,CAAC,OAAO,GAAG,IAAE,CAAC,IAAI;QAAE;IAC9N;IAEA,MAAM,OAAO;IAEb,SAAS,YAAY,IAAW,EAAE,IAAW;QAC3C,MAAM,SAAgC,EAAE;QACxC,IAAI,IAAI,IAAE,GAAE,IAAE,IAAG,IAAI;YACnB,MAAM,QAAS,IAAI,CAAC,KAAK,IAAI;YAC7B,MAAM,QAAS,MAAM,CAAC,KAAK,IAAI;YAC/B,MAAM,IAAI,QAAQ,KAAK,GAAG,CAAC,IAAE,KAAM,KAAK,GAAG,CAAC,GAAG,QAAM;YACrD,MAAM,IAAI,QAAQ,KAAK,GAAG,CAAC,IAAE,KAAM,KAAK,GAAG,CAAC,GAAG,QAAM;YACrD,OAAO,IAAI,CAAC;gBAAE,GAAG,KAAK,KAAK,CAAC,IAAE,OAAK;gBAAK,GAAG,KAAK,KAAK,CAAC,IAAE,OAAK;YAAI;QACnE;QACA,OAAO;IACT;IAEA,MAAM,gBAAgB,YAAY,OAAM;IACxC,MAAM,gBAAgB,YAAY,OAAM;IACxC,MAAM,gBAAgB,YAAY,OAAM;IAExC,IAAA,kNAAS,EAAC;QACR,IAAG,QAAO;QACR,qCAAqC;QACvC;IACF,GAAG;QAAC;KAAO;IAEX,IAAA,kNAAS,EAAC;QACR,cAAc,CAAA;YACZ,MAAM,WAAW;gBAAE,GAAG;gBAAc,GAAG,OAAO,GAAG,IAAI;YAAG;YACxD,MAAM,UAAU;mBAAI;gBAAM;aAAS;YACnC,IAAI,QAAQ,MAAM,GAAG,IAAI;gBACvB,QAAQ,KAAK;YACf;YACA,OAAO;QACT;QACA,gBAAgB,CAAA,OAAQ,OAAO;IACjC,GAAG;QAAC,OAAO,GAAG;KAAC;IAEf,SAAS,kBAAkB,CAAQ,EAAE,CAAK;QACxC,UAAU,CAAC,IAAQ,CAAC;gBAAE,GAAG,CAAC;gBAAE,CAAC,EAAE,EAAE;YAAE,CAAC;IACtC;IAEA,oCAAoC;IACpC,eAAe;QACb,IAAI;YACF,MAAM,OAAO,MAAM,MAAM,wBAAwB;gBAC/C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAQ,MAAM,SAAS,SAAS,WAAW,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC;gBAAG;YACjH;YAEA,IAAI,CAAC,KAAK,EAAE,EAAE;gBACZ,QAAQ,IAAI,CAAC;gBACb,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,KAAK,IAAI;YAC5B,IAAI,MAAM,QAAQ;gBAChB,UAAU,KAAK,MAAM;gBACrB;YACF;YAEA,QAAQ,IAAI,CAAC;QACf,EAAE,OAAO,KAAK;YACZ,gDAAgD;YAChD,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,iBAAiB;oBACvC,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE;wBAAQ,MAAM,SAAS,SAAS,WAAW,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC;oBAAG;gBACjH;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,MAAM,QAAQ,UAAU,KAAK,MAAM;YACzC,EAAE,OAAO,MAAM;gBACb,QAAQ,KAAK,CAAC,iCAAiC;YACjD;QACF;IACF;IAEA,SAAS;QACP,IAAG,WAAW,UAAS;YAAE,MAAM;YAAkC;QAAQ;QACzE,IAAG,WAAW,MAAK;YAAE,cAAc,CAAG,SAAS,cAAc,CAAC,WAAgC,SAAS;YAAK;QAAQ;QACpH,IAAG,WAAW,MAAK;YAAE;YAAqB,MAAM;YAA8C;QAAQ;QACtG;IACF;IAEA,SAAS,YAAY,KAAY;QAC/B,IAAG,UAAQ,YAAW;YACpB,UAAU,CAAC,IAAQ,CAAC;oBAAE,GAAG,CAAC;oBAAE,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAC9D,WAAU;oBAAO,OAAM;oBAAO,MAAK;oBAAO,UAAS;gBAAM,CAAC;QAC9D,OAAO,IAAG,UAAQ,aAAY;YAC5B,UAAU,CAAC,IAAQ,CAAC;oBAAE,GAAG,CAAC;oBAAE,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,UAAS;oBAAM,cAAa;oBAAI,WAAU;oBAAM,eAAc;gBAAG,CAAC;QACxI,OAAO,IAAG,UAAQ,WAAU;YAC1B,UAAU,CAAC,IAAQ,CAAC;oBAAE,GAAG,CAAC;oBAAE,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAC9D,UAAS;oBAAM,cAAa;oBAAI,OAAM;oBAAM,WAAU;oBAAI,UAAS;oBAAM,cAAa;oBAAI,UAAS;oBAAM,cAAa;gBAAG,CAAC;QAC9H,OAAO,IAAG,UAAQ,YAAW;YAC3B,UAAU,CAAC,IAAQ,CAAC;oBAAE,GAAG,CAAC;oBAAE,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAAI,KAAI;oBAC9D,WAAU;oBAAM,eAAc;oBAAI,MAAK;oBAAM,UAAS;oBAAI,UAAS;oBAAM,cAAa;gBAAG,CAAC;QAC9F;QACA,MAAM,qBAAqB;IAC7B;IAEA,SAAS;QACP,IAAI,QAAQ,kFAAkF;YAC5F,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,UAAU;YACV,UAAU;gBAAE,KAAK;gBAAI,KAAK;gBAAI,KAAK;gBAAI,KAAK;gBAAI,KAAK;gBAAG,WAAW;gBAAO,OAAO;gBAAO,MAAM;gBAAO,UAAU;gBAAO,UAAU;gBAAO,UAAU;gBAAO,WAAW;gBAAO,YAAY;YAAM;YAC5L,MAAM;QACR;IACF;IAEA,eAAe;QACb,IAAG;YACD,MAAM,MAAM,MAAM,MAAM,gBAAgB;gBACtC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAO;YAChC;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAG,MAAM,YAAW;gBAClB,IAAI,MAAM,KAAK,KAAK,UAAU,CAAC;oBAC7B,UAAU,CAAC,OAAW,CAAC;4BAAE,GAAG,IAAI;4BAAE,CAAC,EAAE,EAAE,KAAK,UAAU,CAAC,EAAE;wBAAC,CAAC;gBAC7D;YACF,OAAO;gBACL,QAAQ,IAAI,CAAC,0BAA0B;YACzC;QACF,EAAE,OAAM,KAAI;YACV,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,6EAA6E;IAC7E,eAAe;QACb,MAAM,OAAO,OAAO,+BAA8B;QAClD,IAAG,CAAC,MAAM;QACV,IAAI;YACF,MAAM,aAAa,MAAM,SAAS,SAAS,WAAW,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC;YAChG,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM;QACR;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,IAAG,MAAM,SAAS,OAAO;QACzB,IAAG,MAAM,UAAU,OAAO;QAC1B,IAAG,MAAM,cAAc,OAAO;QAC9B,OAAO;IACT;IAEA,qBACE,8OAAC;QAAQ,WAAU;QAAO,IAAG;;0BAC3B,8OAAC;gBAAG,OAAO;oBAAC,WAAU;gBAAC;0BAAG;;;;;;0BAC1B,8OAAC;gBAAI,OAAO;oBAAC,WAAU;oBAAU,cAAa;gBAAE;0BAC9C,cAAA,8OAAC,sIAAY;oBAAC,MAAM;;;;;;;;;;;0BAGtB,8OAAC;gBAAI,OAAO;oBAAC,SAAQ;oBAAQ,KAAI;oBAAG,WAAU;gBAAC;;kCAC7C,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,SAAO,SAAO,WAAS,IAAI;wBAAE,SAAS,IAAI,QAAQ;kCAAS;;;;;;kCACrF,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,SAAO,UAAQ,WAAS,IAAI;wBAAE,SAAS,IAAI,QAAQ;kCAAU;;;;;;kCACvF,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,SAAO,WAAS,WAAS,IAAI;wBAAE,SAAS,IAAI,QAAQ;kCAAW;;;;;;kCACzF,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,SAAO,eAAa,WAAS,IAAI;wBAAE,SAAS,IAAI,QAAQ;kCAAe;;;;;;;;;;;;0BAInG,8OAAC;gBAAI,OAAO;oBAAC,WAAU;gBAAE;0BACtB,SAAS,uBACR;;sCACE,8OAAC;4BAAI,OAAO;gCAAC,WAAU;gCAAU,cAAa;4BAAE;;;;;;sCAGhD,8OAAC;4BAAI,OAAO;gCAAC,WAAU;4BAAE;;8CACvB,8OAAC;oCAAI,OAAO;wCAAC,SAAQ;wCAAQ,KAAI;wCAAI,YAAW;wCAAc,UAAS;oCAAM;;sDAC3E,8OAAC;4CAAI,OAAO;gDAAC,MAAK;gDAAG,UAAS;4CAAG;;8DAC/B,8OAAC;oDAAM,OAAO;wDAAC,SAAQ;wDAAS,cAAa;oDAAC;8DAAG;;;;;;8DACjD,8OAAC;oDAAI,OAAO;wDAAC,UAAS;wDAAY,cAAa;wDAAI,UAAS;oDAAQ;;sEAClE,8OAAC;4DACC,KAAK,WAAW;4DAChB,KAAI;4DACJ,OAAO;gEAAC,OAAM;gEAAQ,SAAQ;gEAAS,cAAa;4DAAE;;;;;;sEAExD,8OAAC;4DAAI,WAAU;4DAAO,OAAO;gEAAC,UAAS;gEAAY,MAAK;gEAAG,KAAI;4DAAC;sEAAG;;;;;;;;;;;;;;;;;;sDAIvE,8OAAC;4CAAI,OAAO;gDAAC,OAAM;gDAAK,UAAS;4CAAG;;8DAClC,8OAAC;oDAAM,OAAO;wDAAC,SAAQ;wDAAS,cAAa;oDAAC;8DAAG;;;;;;8DACjD,8OAAC;oDAAI,OAAO;wDAAC,UAAS;wDAAY,cAAa;wDAAI,UAAS;oDAAQ;;sEAClE,8OAAC;4DAAI,KAAK;4DAAyF,KAAI;4DAAO,OAAO;gEAAC,OAAM;gEAAQ,SAAQ;gEAAS,cAAa;4DAAE;;;;;;sEACpK,8OAAC;4DAAI,WAAU;4DAAO,OAAO;gEAAC,UAAS;gEAAY,OAAM;gEAAG,KAAI;4DAAC;4DAAG,IAAG;sEAAY,QAAQ,YAAY,CAAC,WAAW,EAAE,OAAO,SAAS,CAAC,EAAE,CAAC,GAAG;;;;;;sEAC5I,8OAAC;4DAAI,IAAG;4DAAW,OAAO;gEAAC,UAAS;gEAAY,OAAM;gEAAG,eAAc;gEAAQ,cAAa;gEAAI,YAAY,QAAQ,aAAa,OAAO,UAAU,GAAG;4DAAuB;;;;;;;;;;;;;;;;;;;;;;;;8CAKlL,8OAAC;oCAAI,OAAO;wCAAC,SAAQ;wCAAI,qBAAoB;wCAAW,KAAI;wCAAG,WAAU;oCAAE;;sDACzE,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,OAAO;wDAAC,SAAQ;wDAAQ,gBAAe;wDAAiB,YAAW;oDAAQ;;sEAC9E,8OAAC;sEAAO;;;;;;sEACR,8OAAC,qIAAW;4DAAC,OAAM;sEAAc;;;;;;;;;;;;8DAEnC,8OAAC;oDAAI,OAAO;wDAAC,WAAU;oDAAC;8DACtB,cAAA,8OAAC,uIAAa;wDAAC,OAAM;wDAAc,MAAM;wDAAY,OAAO;;;;;;;;;;;;;;;;;sDAIhE,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAI,OAAO;oDAAC,WAAU;gDAAC;;;;;;;;;;;;;;;;;;;;;;;;iDAMhC,8OAAC,iIAAO;oBACN,MAAM,SAAS,UAAU,UAAU,SAAS,WAAW,WAAW;oBAClE,SAAS,WAAW;oBACpB,SAAS;oBACT,QAAQ;oBACR,UAAU,CAAC,GAAU,IAAQ,kBAAkB,GAAG;;;;;;;;;;;0BAKxD,8OAAC;gBAAI,WAAU;0BAAQ;;;;;;0BAEvB,8OAAC;gBAAI,OAAO;oBAAC,WAAU;gBAAE;gBAAG,WAAU;;kCACpC,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,WAAS,WAAS,WAAS,IAAI;wBAAE,SAAS,IAAI,UAAU;wBAAW,eAAY;kCAAS;;;;;;kCAClH,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,WAAS,WAAS,WAAS,IAAI;wBAAE,SAAS,IAAI,UAAU;wBAAW,eAAY;kCAAS;;;;;;kCAClH,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,WAAS,OAAK,WAAS,IAAI;wBAAE,SAAS,IAAI,UAAU;wBAAO,eAAY;kCAAK;;;;;;kCACtG,8OAAC;wBAAI,WAAW,CAAC,OAAO,EAAE,WAAS,OAAK,WAAS,IAAI;wBAAE,SAAS,IAAI,UAAU;wBAAO,eAAY;kCAAK;;;;;;;;;;;;YAIvG,WAAW,0BACV,8OAAC;gBAAI,IAAG;gBAAgB,WAAU;0BAChC,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;8CAAM;;;;;;8CACP,8OAAC;oCAAM,IAAG;oCAAM,MAAK;oCAAQ,KAAI;oCAAI,KAAI;oCAAM,OAAO,OAAO,GAAG;oCAAE,UAAU,CAAC,IAAI,kBAAkB,OAAO,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;8CACzH,8OAAC;oCAAI,WAAU;8CAAc;;;;;;;;;;;;sCAG/B,8OAAC;4BAAI,WAAU;4BAAW,OAAO;gCAAC,KAAI;4BAAE;;8CACtC,8OAAC;oCAAI,OAAO;wCAAC,MAAK;oCAAC;;sDACjB,8OAAC;sDAAM;;;;;;sDACP,8OAAC;4CAAM,IAAG;4CAAM,MAAK;4CAAQ,KAAI;4CAAI,KAAI;4CAAM,OAAO,OAAO,GAAG;4CAAE,UAAU,CAAC,IAAI,kBAAkB,OAAO,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8CAE3H,8OAAC;oCAAI,OAAO;wCAAC,MAAK;oCAAC;;sDACjB,8OAAC;sDAAM;;;;;;sDACP,8OAAC;4CAAM,IAAG;4CAAM,MAAK;4CAAQ,KAAI;4CAAI,KAAI;4CAAM,OAAO,OAAO,GAAG;4CAAE,UAAU,CAAC,IAAI,kBAAkB,OAAO,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;sCAI7H,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,OAAO;wCAAC,MAAK;oCAAC;;sDACjB,8OAAC;sDAAM;;;;;;sDACP,8OAAC;4CAAM,IAAG;4CAAM,MAAK;4CAAQ,KAAI;4CAAI,KAAI;4CAAM,OAAO,OAAO,GAAG;4CAAE,UAAU,CAAC,IAAI,kBAAkB,OAAO,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8CAE3H,8OAAC;oCAAI,OAAO;wCAAC,OAAM;oCAAG;;sDACpB,8OAAC;sDAAM;;;;;;sDACP,8OAAC;4CAAM,IAAG;4CAAM,MAAK;4CAAQ,KAAI;4CAAM,KAAI;4CAAK,OAAO,OAAO,GAAG;4CAAE,UAAU,CAAC,IAAI,kBAAkB,OAAO,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;sCAI9H,8OAAC;4BAAI,WAAU;4BAAU,OAAO;gCAAC,QAAO;gCAAG,YAAW;gCAA0B,QAAO;4BAAO;;;;;;sCAE9F,8OAAC;4BAAM,OAAO;gCAAC,cAAa;4BAAC;sCAAG;;;;;;sCAChC,8OAAC;4BAAI,WAAU;4BAAS,OAAO;gCAAC,UAAS;4BAAM;sCAC5C;gCAAE;oCAAC;oCAAY;oCAAmB;iCAAgB;gCACjD;oCAAC;oCAAQ;oCAAgB;iCAAY;gCACrC;oCAAC;oCAAO;oCAAkC;iCAAW;gCACrD;oCAAC;oCAAW;oCAAqB;iCAAe;gCAChD;oCAAC;oCAAW;oCAAyB;iCAAe;gCACpD;oCAAC;oCAAW;oCAAiB;iCAAe;gCAC5C;oCAAC;oCAAY;oCAA4B;iCAAgB;gCACzD;oCAAC;oCAAa;oCAAyB;iCAAiB;6BACzD,CAAC,GAAG,CAAC,CAAC,CAAC,IAAG,OAAM,OAAO,iBACtB,8OAAC;oCAAa,OAAO;wCAAC,UAAS;oCAAG;;sDAChC,8OAAC;4CAAM,MAAK;4CAAW,IAAI;4CAAc,SAAS,CAAC,CAAC,MAAM,CAAC,GAAU;4CAAE,UAAU,CAAC,IAAI,kBAAkB,IAAc,EAAE,MAAM,CAAC,OAAO;;;;;;sDACtI,8OAAC;4CAAM,SAAS;4CAAc,OAAO;gDAAC,SAAQ;gDAAU,OAAM;4CAAc;;gDAAG;gDAAE;;;;;;;sDACjF,8OAAC;4CAAI,OAAO;gDAAC,SAAQ;gDAAQ,KAAI;gDAAG,WAAU;4CAAC;sDAC7C,cAAA,8OAAC;gDAAM,IAAI,GAAG,GAAG,IAAI,CAAC;gDAAE,MAAK;gDAAQ,KAAI;gDAAI,KAAI;gDAAM,OAAO,MAAM,CAAC,OAAc,IAAI;gDAAG,UAAU,CAAC,IAAI,kBAAkB,QAAkB,CAAC,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;mCAJtJ;;;;;;;;;;sCAUd,8OAAC;4BAAI,OAAO;gCAAC,SAAQ;gCAAQ,KAAI;gCAAG,WAAU;gCAAI,YAAW;4BAAQ;;8CACnE,8OAAC;oCAAO,WAAU;oCAAmB,IAAG;oCAAc,SAAS;8CAAY;;;;;;8CAC3E,8OAAC;oCAAO,WAAU;oCAAiB,IAAG;oCAAe,SAAS;8CAAoB;;;;;;8CAClF,8OAAC;oCAAO,WAAU;oCAAkB,IAAG;oCAAmB,SAAS;8CAAkB;;;;;;8CACrF,8OAAC;oCAAI,OAAO;wCAAC,YAAW;oCAAM;oCAAG,WAAU;8CAAO,cAAA,8OAAC;wCAAK,IAAG;;4CAAa;4CAAS,WAAS,WAAS,WAAS,WAAS,WAAS,WAAS,WAAS,OAAK,eAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOzK,WAAS,0BACR,8OAAC;gBAAI,IAAG;gBAAgB,WAAU;;kCAChC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAI,OAAO;4BAAC,SAAQ;4BAAQ,KAAI;4BAAG,UAAS;4BAAQ,WAAU;wBAAC;;0CAC9D,8OAAC;gCAAO,WAAU;gCAAiB,SAAS,IAAI,YAAY;0CAAa;;;;;;0CACzE,8OAAC;gCAAO,WAAU;gCAAiB,SAAS,IAAI,YAAY;0CAAc;;;;;;0CAC1E,8OAAC;gCAAO,WAAU;gCAAiB,SAAS,IAAI,YAAY;0CAAY;;;;;;0CACxE,8OAAC;gCAAO,WAAU;gCAAiB,SAAS,IAAI,YAAY;0CAAa;;;;;;;;;;;;kCAE3E,8OAAC;wBAAI,WAAU;wBAAc,OAAO;4BAAC,WAAU;wBAAC;kCAAG;;;;;;;;;;;;YAKtD,WAAS,sBACR,8OAAC;gBAAI,IAAG;gBAAY,WAAU;;kCAC5B,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAI,OAAO;4BAAC,SAAQ;4BAAQ,KAAI;4BAAG,YAAW;4BAAU,WAAU;wBAAC;;0CAClE,8OAAC;gCAAM,IAAG;gCAAS,MAAK;gCAAS,KAAK;gCAAI,KAAK;gCAAK,cAAc;gCAAI,OAAO;oCAAC,OAAM;oCAAG,SAAQ;oCAAE,cAAa;oCAAE,QAAO;oCAAmC,YAAW;oCAAc,OAAM;gCAAY;;;;;;0CACrM,8OAAC;gCAAO,WAAU;gCAAmB,IAAG;gCAAQ,SAAS;oCAAM,MAAM,OAAO,CAAC,AAAC,SAAS,cAAc,CAAC,UAA+B,KAAK,IAAI;oCAAI,cAAc;gCAAO;0CAAG;;;;;;;;;;;;kCAE5K,8OAAC;wBAAI,WAAU;wBAAc,OAAO;4BAAC,WAAU;wBAAC;kCAAG;;;;;;;;;;;;YAKtD,WAAS,sBACR,8OAAC;gBAAI,IAAG;gBAAY,WAAU;;kCAC5B,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBAAI,WAAU;kCAAc;;;;;;kCAC7B,8OAAC;wBAAI,OAAO;4BAAC,WAAU;wBAAC;kCACtB,cAAA,8OAAC;4BAAO,WAAU;4BAAmB,IAAG;4BAAY,SAAS;gCAAY,MAAM;gCAAmB,MAAM;4BAAsD;sCAAG;;;;;;;;;;;;;;;;;0BAKvK,8OAAC;gBAAI,OAAO;oBAAC,WAAU;oBAAI,SAAQ;oBAAQ,KAAI;oBAAI,YAAW;gBAAQ;;kCACpE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,+HAAK;4BAAC,OAAO,QAAQ,SAAS;;;;;;;;;;;kCAEjC,8OAAC;wBAAI,OAAO;4BAAC,MAAK;wBAAC;;0CACjB,8OAAC;gCAAI,WAAU;0CAAc;;;;;;0CAC7B,8OAAC;gCAAI,OAAO;oCAAC,WAAU;gCAAC;0CACtB,cAAA,8OAAC;oCAAI,IAAG;oCAAa,WAAU;8CAAS,SAAS,CAAC,UAAU,EAAE,OAAO,KAAK,CAAC,OAAO,EAAE,OAAO,SAAS,CAAC,kBAAkB,EAAE,OAAO,YAAY,CAAC,cAAc,EAAE,OAAO,QAAQ,CAAC,EAAE,CAAC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM/L","debugId":null}},
    {"offset": {"line": 2910, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/components/PreviewCanvas.tsx"],"sourcesContent":["// components/PreviewCanvas.tsx\r\n'use client';\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\nexport default function PreviewCanvas({ index }: { index?: number }){\r\n  const ref = useRef<HTMLCanvasElement|null>(null);\r\n  useEffect(()=>{\r\n    const c = ref.current; if(!c) return;\r\n    const ctx = c.getContext('2d')!;\r\n    function draw(){\r\n      const w = c.width, h = c.height; ctx.clearRect(0,0,w,h);\r\n      const idx = (typeof index === 'number') ? index : (JSON.parse(localStorage.getItem('gaia_result') || 'null')?.index || 50);\r\n      const g = ctx.createLinearGradient(0,0,w,0);\r\n      g.addColorStop(0,'rgba(255,255,255,0.02)'); g.addColorStop(1,'rgba(255,255,255,0.01)');\r\n      ctx.fillStyle = g; ctx.fillRect(0,0,w,h);\r\n      const threat = 100 - idx;\r\n      ctx.fillStyle = 'rgba(255,80,80,0.18)'; ctx.fillRect(10,20,(threat/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(30,200,110,0.18)'; ctx.fillRect(10,20,((idx)/100)*(w-20),60);\r\n      ctx.fillStyle = 'rgba(255,255,255,0.9)'; ctx.font='12px sans-serif';\r\n      \r\n    }\r\n    draw();\r\n    const t = setInterval(draw, 800);\r\n    return ()=>clearInterval(t);\r\n  },[index]);\r\n  return <canvas id=\"previewCanvas\" ref={ref} width={0} height={0} style={{marginTop:12,borderRadius:10, background:'transparent'}}/>;\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAE/B;AADA;;;AAGe,SAAS,cAAc,EAAE,KAAK,EAAsB;IACjE,MAAM,MAAM,IAAA,+MAAM,EAAyB;IAC3C,IAAA,kNAAS,EAAC;QACR,MAAM,IAAI,IAAI,OAAO;QAAE,IAAG,CAAC,GAAG;QAC9B,MAAM,MAAM,EAAE,UAAU,CAAC;QACzB,SAAS;YACP,MAAM,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM;YAAE,IAAI,SAAS,CAAC,GAAE,GAAE,GAAE;YACrD,MAAM,MAAM,AAAC,OAAO,UAAU,WAAY,QAAS,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,kBAAkB,SAAS,SAAS;YACvH,MAAM,IAAI,IAAI,oBAAoB,CAAC,GAAE,GAAE,GAAE;YACzC,EAAE,YAAY,CAAC,GAAE;YAA2B,EAAE,YAAY,CAAC,GAAE;YAC7D,IAAI,SAAS,GAAG;YAAG,IAAI,QAAQ,CAAC,GAAE,GAAE,GAAE;YACtC,MAAM,SAAS,MAAM;YACrB,IAAI,SAAS,GAAG;YAAwB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAC,SAAO,MAAK,CAAC,IAAE,EAAE,GAAE;YAC/E,IAAI,SAAS,GAAG;YAAyB,IAAI,QAAQ,CAAC,IAAG,IAAG,AAAE,MAAK,MAAK,CAAC,IAAE,EAAE,GAAE;YAC/E,IAAI,SAAS,GAAG;YAAyB,IAAI,IAAI,GAAC;QAEpD;QACA;QACA,MAAM,IAAI,YAAY,MAAM;QAC5B,OAAO,IAAI,cAAc;IAC3B,GAAE;QAAC;KAAM;IACT,qBAAO,8OAAC;QAAO,IAAG;QAAgB,KAAK;QAAK,OAAO;QAAG,QAAQ;QAAG,OAAO;YAAC,WAAU;YAAG,cAAa;YAAI,YAAW;QAAa;;;;;;AACjI","debugId":null}},
    {"offset": {"line": 2969, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/GAIA_AI_PROJECT/app/gaia-link/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Navbar from \"@/components/Navbar\";\r\nimport Chatbot from \"@/components/Chatbot\";\r\nimport SimulationUI from \"@/components/SimulationUI\";\r\nimport GaiaLink from '../../components/GaiaLink';\r\nimport useGaiaSimulation from '../../lib/useGaiaSimulation';\r\nimport useGaiaState from '../../lib/useGaiaState';\r\nimport PreviewCanvas from '../../components/PreviewCanvas';\r\nimport SimulationPage from '../simulation/page';\r\n\r\nexport default function GaiaLinkPage() {\r\n  const { result } = useGaiaSimulation();\r\n  const { state, loading, refresh } = useGaiaState();\r\n\r\n  function hexToRgba(hex: string, alpha = 0.18) {\r\n    if (!hex) return `rgba(255,100,0,${alpha})`;\r\n    let h = hex.replace('#', '');\r\n    if (h.length === 3) h = h.split('').map((c) => c + c).join('');\r\n    const num = parseInt(h, 16);\r\n    const r = (num >> 16) & 255;\r\n    const g = (num >> 8) & 255;\r\n    const b = num & 255;\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"wrap\">\r\n        <section style={{display:'flex', flexDirection:'column', gap:12}}>\r\n          <GaiaLink />\r\n        </section>\r\n\r\n        <aside className=\"card\" style={{display:'flex', flexDirection:'column'}}>\r\n          \r\n            \r\n\r\n          <PreviewCanvas index={result?.index} />\r\n        </aside>\r\n      </main>\r\n\r\n      <Chatbot />\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AARA;;;;;;;;AAWe,SAAS;IACtB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,mIAAiB;IACpC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,8HAAY;IAEhD,SAAS,UAAU,GAAW,EAAE,QAAQ,IAAI;QAC1C,IAAI,CAAC,KAAK,OAAO,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;QAC3C,IAAI,IAAI,IAAI,OAAO,CAAC,KAAK;QACzB,IAAI,EAAE,MAAM,KAAK,GAAG,IAAI,EAAE,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,IAAM,IAAI,GAAG,IAAI,CAAC;QAC3D,MAAM,MAAM,SAAS,GAAG;QACxB,MAAM,IAAI,AAAC,OAAO,KAAM;QACxB,MAAM,IAAI,AAAC,OAAO,IAAK;QACvB,MAAM,IAAI,MAAM;QAChB,OAAO,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;IAC3C;IAEA,qBACE;;0BACE,8OAAC,gIAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAQ,OAAO;4BAAC,SAAQ;4BAAQ,eAAc;4BAAU,KAAI;wBAAE;kCAC7D,cAAA,8OAAC,kIAAQ;;;;;;;;;;kCAGX,8OAAC;wBAAM,WAAU;wBAAO,OAAO;4BAAC,SAAQ;4BAAQ,eAAc;wBAAQ;kCAIpE,cAAA,8OAAC,uIAAa;4BAAC,OAAO,QAAQ;;;;;;;;;;;;;;;;;0BAIlC,8OAAC,iIAAO;;;;;;;AAGd","debugId":null}}]
}